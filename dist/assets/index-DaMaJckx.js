(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gh(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Qu={exports:{}},di={},Ju={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr=Symbol.for("react.element"),Qh=Symbol.for("react.portal"),Jh=Symbol.for("react.fragment"),Yh=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),Zh=Symbol.for("react.provider"),ef=Symbol.for("react.context"),tf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.memo"),sf=Symbol.for("react.lazy"),xa=Symbol.iterator;function of(t){return t===null||typeof t!="object"?null:(t=xa&&t[xa]||t["@@iterator"],typeof t=="function"?t:null)}var Yu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xu=Object.assign,Zu={};function Yn(t,e,n){this.props=t,this.context=e,this.refs=Zu,this.updater=n||Yu}Yn.prototype.isReactComponent={};Yn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ec(){}ec.prototype=Yn.prototype;function wl(t,e,n){this.props=t,this.context=e,this.refs=Zu,this.updater=n||Yu}var _l=wl.prototype=new ec;_l.constructor=wl;Xu(_l,Yn.prototype);_l.isPureReactComponent=!0;var ka=Array.isArray,tc=Object.prototype.hasOwnProperty,xl={current:null},nc={key:!0,ref:!0,__self:!0,__source:!0};function rc(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tc.call(e,r)&&!nc.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Qr,type:t,key:i,ref:o,props:s,_owner:xl.current}}function lf(t,e){return{$$typeof:Qr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qr}function af(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sa=/\/+/g;function Mi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?af(""+t.key):e.toString(36)}function Cs(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qr:case Qh:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Mi(o,0):r,ka(s)?(n="",t!=null&&(n=t.replace(Sa,"$&/")+"/"),Cs(s,e,n,"",function(u){return u})):s!=null&&(kl(s)&&(s=lf(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sa,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ka(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+Mi(i,l);o+=Cs(i,e,n,a,s)}else if(a=of(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+Mi(i,l++),o+=Cs(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rs(t,e,n){if(t==null)return t;var r=[],s=0;return Cs(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var je={current:null},Ns={transition:null},cf={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Ns,ReactCurrentOwner:xl};function sc(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:rs,forEach:function(t,e,n){rs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rs(t,function(){e++}),e},toArray:function(t){return rs(t,function(e){return e})||[]},only:function(t){if(!kl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=Yn;F.Fragment=Jh;F.Profiler=Xh;F.PureComponent=wl;F.StrictMode=Yh;F.Suspense=nf;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cf;F.act=sc;F.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xu({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)tc.call(e,a)&&!nc.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Qr,type:t.type,key:s,ref:i,props:r,_owner:o}};F.createContext=function(t){return t={$$typeof:ef,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zh,_context:t},t.Consumer=t};F.createElement=rc;F.createFactory=function(t){var e=rc.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:tf,render:t}};F.isValidElement=kl;F.lazy=function(t){return{$$typeof:sf,_payload:{_status:-1,_result:t},_init:uf}};F.memo=function(t,e){return{$$typeof:rf,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=Ns.transition;Ns.transition={};try{t()}finally{Ns.transition=e}};F.unstable_act=sc;F.useCallback=function(t,e){return je.current.useCallback(t,e)};F.useContext=function(t){return je.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return je.current.useDeferredValue(t)};F.useEffect=function(t,e){return je.current.useEffect(t,e)};F.useId=function(){return je.current.useId()};F.useImperativeHandle=function(t,e,n){return je.current.useImperativeHandle(t,e,n)};F.useInsertionEffect=function(t,e){return je.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return je.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return je.current.useMemo(t,e)};F.useReducer=function(t,e,n){return je.current.useReducer(t,e,n)};F.useRef=function(t){return je.current.useRef(t)};F.useState=function(t){return je.current.useState(t)};F.useSyncExternalStore=function(t,e,n){return je.current.useSyncExternalStore(t,e,n)};F.useTransition=function(){return je.current.useTransition()};F.version="18.3.1";Ju.exports=F;var U=Ju.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=U,hf=Symbol.for("react.element"),ff=Symbol.for("react.fragment"),pf=Object.prototype.hasOwnProperty,mf=df.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gf={key:!0,ref:!0,__self:!0,__source:!0};function ic(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pf.call(e,r)&&!gf.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hf,type:t,key:i,ref:o,props:s,_owner:mf.current}}di.Fragment=ff;di.jsx=ic;di.jsxs=ic;Qu.exports=di;var c=Qu.exports,oc={exports:{}},Me={},lc={exports:{}},ac={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,I){var M=N.length;N.push(I);e:for(;0<M;){var Y=M-1>>>1,se=N[Y];if(0<s(se,I))N[Y]=I,N[M]=se,M=Y;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var I=N[0],M=N.pop();if(M!==I){N[0]=M;e:for(var Y=0,se=N.length,Ve=se>>>1;Y<Ve;){var rt=2*(Y+1)-1,rr=N[rt],ct=rt+1,gn=N[ct];if(0>s(rr,M))ct<se&&0>s(gn,rr)?(N[Y]=gn,N[ct]=M,Y=ct):(N[Y]=rr,N[rt]=M,Y=rt);else if(ct<se&&0>s(gn,M))N[Y]=gn,N[ct]=M,Y=ct;else break e}}return I}function s(N,I){var M=N.sortIndex-I.sortIndex;return M!==0?M:N.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],d=1,h=null,m=3,y=!1,_=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(N){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=N)r(u),I.sortIndex=I.expirationTime,e(a,I);else break;I=n(u)}}function w(N){if(v=!1,g(N),!_)if(n(a)!==null)_=!0,nr(j);else{var I=n(u);I!==null&&mn(w,I.startTime-N)}}function j(N,I){_=!1,v&&(v=!1,f(P),P=-1),y=!0;var M=m;try{for(g(I),h=n(a);h!==null&&(!(h.expirationTime>I)||N&&!_e());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,m=h.priorityLevel;var se=Y(h.expirationTime<=I);I=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(a)&&r(a),g(I)}else r(a);h=n(a)}if(h!==null)var Ve=!0;else{var rt=n(u);rt!==null&&mn(w,rt.startTime-I),Ve=!1}return Ve}finally{h=null,m=M,y=!1}}var E=!1,C=null,P=-1,G=5,z=-1;function _e(){return!(t.unstable_now()-z<G)}function St(){if(C!==null){var N=t.unstable_now();z=N;var I=!0;try{I=C(!0,N)}finally{I?ut():(E=!1,C=null)}}else E=!1}var ut;if(typeof p=="function")ut=function(){p(St)};else if(typeof MessageChannel<"u"){var pn=new MessageChannel,Ai=pn.port2;pn.port1.onmessage=St,ut=function(){Ai.postMessage(null)}}else ut=function(){k(St,0)};function nr(N){C=N,E||(E=!0,ut())}function mn(N,I){P=k(function(){N(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,nr(j))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var M=m;m=I;try{return N()}finally{m=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,I){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var M=m;m=N;try{return I()}finally{m=M}},t.unstable_scheduleCallback=function(N,I,M){var Y=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Y+M:Y):M=Y,N){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=M+se,N={id:d++,callback:I,priorityLevel:N,startTime:M,expirationTime:se,sortIndex:-1},M>Y?(N.sortIndex=M,e(u,N),n(a)===null&&N===n(u)&&(v?(f(P),P=-1):v=!0,mn(w,M-Y))):(N.sortIndex=se,e(a,N),_||y||(_=!0,nr(j))),N},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(N){var I=m;return function(){var M=m;m=I;try{return N.apply(this,arguments)}finally{m=M}}}})(ac);lc.exports=ac;var vf=lc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf=U,Le=vf;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uc=new Set,Rr={};function dn(t,e){Hn(t,e),Hn(t+"Capture",e)}function Hn(t,e){for(Rr[t]=e,t=0;t<e.length;t++)uc.add(e[t])}var yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yo=Object.prototype.hasOwnProperty,wf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ja={},Ea={};function _f(t){return yo.call(Ea,t)?!0:yo.call(ja,t)?!1:wf.test(t)?Ea[t]=!0:(ja[t]=!0,!1)}function xf(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kf(t,e,n,r){if(e===null||typeof e>"u"||xf(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ee(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fe[t]=new Ee(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fe[e]=new Ee(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fe[t]=new Ee(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fe[t]=new Ee(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fe[t]=new Ee(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fe[t]=new Ee(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fe[t]=new Ee(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fe[t]=new Ee(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fe[t]=new Ee(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sl=/[\-:]([a-z])/g;function jl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sl,jl);fe[e]=new Ee(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sl,jl);fe[e]=new Ee(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sl,jl);fe[e]=new Ee(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fe[t]=new Ee(t,1,!1,t.toLowerCase(),null,!1,!1)});fe.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fe[t]=new Ee(t,1,!1,t.toLowerCase(),null,!0,!0)});function El(t,e,n,r){var s=fe.hasOwnProperty(e)?fe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kf(e,n,s,r)&&(n=null),r||s===null?_f(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kt=yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ss=Symbol.for("react.element"),Sn=Symbol.for("react.portal"),jn=Symbol.for("react.fragment"),bl=Symbol.for("react.strict_mode"),wo=Symbol.for("react.profiler"),cc=Symbol.for("react.provider"),dc=Symbol.for("react.context"),Cl=Symbol.for("react.forward_ref"),_o=Symbol.for("react.suspense"),xo=Symbol.for("react.suspense_list"),Nl=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),hc=Symbol.for("react.offscreen"),ba=Symbol.iterator;function ir(t){return t===null||typeof t!="object"?null:(t=ba&&t[ba]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,zi;function pr(t){if(zi===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zi=e&&e[1]||""}return`
`+zi+t}var Di=!1;function Ui(t,e){if(!t||Di)return"";Di=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Di=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pr(t):""}function Sf(t){switch(t.tag){case 5:return pr(t.type);case 16:return pr("Lazy");case 13:return pr("Suspense");case 19:return pr("SuspenseList");case 0:case 2:case 15:return t=Ui(t.type,!1),t;case 11:return t=Ui(t.type.render,!1),t;case 1:return t=Ui(t.type,!0),t;default:return""}}function ko(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jn:return"Fragment";case Sn:return"Portal";case wo:return"Profiler";case bl:return"StrictMode";case _o:return"Suspense";case xo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dc:return(t.displayName||"Context")+".Consumer";case cc:return(t._context.displayName||"Context")+".Provider";case Cl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nl:return e=t.displayName||null,e!==null?e:ko(t.type)||"Memo";case Ct:e=t._payload,t=t._init;try{return ko(t(e))}catch{}}return null}function jf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ko(e);case 8:return e===bl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ht(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ef(t){var e=fc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function is(t){t._valueTracker||(t._valueTracker=Ef(t))}function pc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fc(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ds(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function So(t,e){var n=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ca(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ht(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mc(t,e){e=e.checked,e!=null&&El(t,"checked",e,!1)}function jo(t,e){mc(t,e);var n=Ht(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eo(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eo(t,e.type,Ht(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Na(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eo(t,e,n){(e!=="number"||Ds(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mr=Array.isArray;function Ln(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ht(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ta(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(mr(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ht(n)}}function gc(t,e){var n=Ht(e.value),r=Ht(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pa(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Co(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var os,yc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(os=os||document.createElement("div"),os.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=os.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Or(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bf=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(t){bf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wr[e]=wr[t]})});function wc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wr.hasOwnProperty(t)&&wr[t]?(""+e).trim():e+"px"}function _c(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wc(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Cf=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function No(t,e){if(e){if(Cf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function To(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Po=null;function Tl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ro=null,Mn=null,zn=null;function Ra(t){if(t=Xr(t)){if(typeof Ro!="function")throw Error(S(280));var e=t.stateNode;e&&(e=gi(e),Ro(t.stateNode,t.type,e))}}function xc(t){Mn?zn?zn.push(t):zn=[t]:Mn=t}function kc(){if(Mn){var t=Mn,e=zn;if(zn=Mn=null,Ra(t),e)for(t=0;t<e.length;t++)Ra(e[t])}}function Sc(t,e){return t(e)}function jc(){}var Fi=!1;function Ec(t,e,n){if(Fi)return t(e,n);Fi=!0;try{return Sc(t,e,n)}finally{Fi=!1,(Mn!==null||zn!==null)&&(jc(),kc())}}function Ir(t,e){var n=t.stateNode;if(n===null)return null;var r=gi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var Oo=!1;if(yt)try{var or={};Object.defineProperty(or,"passive",{get:function(){Oo=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Oo=!1}function Nf(t,e,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var _r=!1,Us=null,Fs=!1,Io=null,Tf={onError:function(t){_r=!0,Us=t}};function Pf(t,e,n,r,s,i,o,l,a){_r=!1,Us=null,Nf.apply(Tf,arguments)}function Rf(t,e,n,r,s,i,o,l,a){if(Pf.apply(this,arguments),_r){if(_r){var u=Us;_r=!1,Us=null}else throw Error(S(198));Fs||(Fs=!0,Io=u)}}function hn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Oa(t){if(hn(t)!==t)throw Error(S(188))}function Of(t){var e=t.alternate;if(!e){if(e=hn(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Oa(s),t;if(i===r)return Oa(s),e;i=i.sibling}throw Error(S(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function Cc(t){return t=Of(t),t!==null?Nc(t):null}function Nc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nc(t);if(e!==null)return e;t=t.sibling}return null}var Tc=Le.unstable_scheduleCallback,Ia=Le.unstable_cancelCallback,If=Le.unstable_shouldYield,Af=Le.unstable_requestPaint,re=Le.unstable_now,$f=Le.unstable_getCurrentPriorityLevel,Pl=Le.unstable_ImmediatePriority,Pc=Le.unstable_UserBlockingPriority,Bs=Le.unstable_NormalPriority,Lf=Le.unstable_LowPriority,Rc=Le.unstable_IdlePriority,hi=null,lt=null;function Mf(t){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(hi,t,void 0,(t.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:Uf,zf=Math.log,Df=Math.LN2;function Uf(t){return t>>>=0,t===0?32:31-(zf(t)/Df|0)|0}var ls=64,as=4194304;function gr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=gr(l):(i&=o,i!==0&&(r=gr(i)))}else o=n&~s,o!==0?r=gr(o):i!==0&&(r=gr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-et(e),s=1<<n,r|=t[n],e&=~s;return r}function Ff(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bf(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-et(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=Ff(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function Ao(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Oc(){var t=ls;return ls<<=1,!(ls&4194240)&&(ls=64),t}function Bi(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-et(e),t[e]=n}function Hf(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-et(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Rl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-et(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var H=0;function Ic(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ac,Ol,$c,Lc,Mc,$o=!1,us=[],$t=null,Lt=null,Mt=null,Ar=new Map,$r=new Map,Pt=[],Wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Aa(t,e){switch(t){case"focusin":case"focusout":$t=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Ar.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(e.pointerId)}}function lr(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xr(e),e!==null&&Ol(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function qf(t,e,n,r,s){switch(e){case"focusin":return $t=lr($t,t,e,n,r,s),!0;case"dragenter":return Lt=lr(Lt,t,e,n,r,s),!0;case"mouseover":return Mt=lr(Mt,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ar.set(i,lr(Ar.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$r.set(i,lr($r.get(i)||null,t,e,n,r,s)),!0}return!1}function zc(t){var e=en(t.target);if(e!==null){var n=hn(e);if(n!==null){if(e=n.tag,e===13){if(e=bc(n),e!==null){t.blockedOn=e,Mc(t.priority,function(){$c(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ts(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Po=r,n.target.dispatchEvent(r),Po=null}else return e=Xr(n),e!==null&&Ol(e),t.blockedOn=n,!1;e.shift()}return!0}function $a(t,e,n){Ts(t)&&n.delete(e)}function Vf(){$o=!1,$t!==null&&Ts($t)&&($t=null),Lt!==null&&Ts(Lt)&&(Lt=null),Mt!==null&&Ts(Mt)&&(Mt=null),Ar.forEach($a),$r.forEach($a)}function ar(t,e){t.blockedOn===e&&(t.blockedOn=null,$o||($o=!0,Le.unstable_scheduleCallback(Le.unstable_NormalPriority,Vf)))}function Lr(t){function e(s){return ar(s,t)}if(0<us.length){ar(us[0],t);for(var n=1;n<us.length;n++){var r=us[n];r.blockedOn===t&&(r.blockedOn=null)}}for($t!==null&&ar($t,t),Lt!==null&&ar(Lt,t),Mt!==null&&ar(Mt,t),Ar.forEach(e),$r.forEach(e),n=0;n<Pt.length;n++)r=Pt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pt.length&&(n=Pt[0],n.blockedOn===null);)zc(n),n.blockedOn===null&&Pt.shift()}var Dn=kt.ReactCurrentBatchConfig,Ws=!0;function Kf(t,e,n,r){var s=H,i=Dn.transition;Dn.transition=null;try{H=1,Il(t,e,n,r)}finally{H=s,Dn.transition=i}}function Gf(t,e,n,r){var s=H,i=Dn.transition;Dn.transition=null;try{H=4,Il(t,e,n,r)}finally{H=s,Dn.transition=i}}function Il(t,e,n,r){if(Ws){var s=Lo(t,e,n,r);if(s===null)Xi(t,e,r,qs,n),Aa(t,r);else if(qf(s,t,e,n,r))r.stopPropagation();else if(Aa(t,r),e&4&&-1<Wf.indexOf(t)){for(;s!==null;){var i=Xr(s);if(i!==null&&Ac(i),i=Lo(t,e,n,r),i===null&&Xi(t,e,r,qs,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xi(t,e,r,null,n)}}var qs=null;function Lo(t,e,n,r){if(qs=null,t=Tl(r),t=en(t),t!==null)if(e=hn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qs=t,null}function Dc(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($f()){case Pl:return 1;case Pc:return 4;case Bs:case Lf:return 16;case Rc:return 536870912;default:return 16}default:return 16}}var It=null,Al=null,Ps=null;function Uc(){if(Ps)return Ps;var t,e=Al,n=e.length,r,s="value"in It?It.value:It.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ps=s.slice(t,1<r?1-r:void 0)}function Rs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cs(){return!0}function La(){return!1}function ze(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cs:La,this.isPropagationStopped=La,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cs)},persist:function(){},isPersistent:cs}),e}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=ze(Xn),Yr=ee({},Xn,{view:0,detail:0}),Qf=ze(Yr),Hi,Wi,ur,fi=ee({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ur&&(ur&&t.type==="mousemove"?(Hi=t.screenX-ur.screenX,Wi=t.screenY-ur.screenY):Wi=Hi=0,ur=t),Hi)},movementY:function(t){return"movementY"in t?t.movementY:Wi}}),Ma=ze(fi),Jf=ee({},fi,{dataTransfer:0}),Yf=ze(Jf),Xf=ee({},Yr,{relatedTarget:0}),qi=ze(Xf),Zf=ee({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),ep=ze(Zf),tp=ee({},Xn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),np=ze(tp),rp=ee({},Xn,{data:0}),za=ze(rp),sp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},op={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lp(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=op[t])?!!e[t]:!1}function Ll(){return lp}var ap=ee({},Yr,{key:function(t){if(t.key){var e=sp[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ip[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(t){return t.type==="keypress"?Rs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),up=ze(ap),cp=ee({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Da=ze(cp),dp=ee({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),hp=ze(dp),fp=ee({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pp=ze(fp),mp=ee({},fi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gp=ze(mp),vp=[9,13,27,32],Ml=yt&&"CompositionEvent"in window,xr=null;yt&&"documentMode"in document&&(xr=document.documentMode);var yp=yt&&"TextEvent"in window&&!xr,Fc=yt&&(!Ml||xr&&8<xr&&11>=xr),Ua=" ",Fa=!1;function Bc(t,e){switch(t){case"keyup":return vp.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var En=!1;function wp(t,e){switch(t){case"compositionend":return Hc(e);case"keypress":return e.which!==32?null:(Fa=!0,Ua);case"textInput":return t=e.data,t===Ua&&Fa?null:t;default:return null}}function _p(t,e){if(En)return t==="compositionend"||!Ml&&Bc(t,e)?(t=Uc(),Ps=Al=It=null,En=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fc&&e.locale!=="ko"?null:e.data;default:return null}}var xp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ba(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xp[t.type]:e==="textarea"}function Wc(t,e,n,r){xc(r),e=Vs(e,"onChange"),0<e.length&&(n=new $l("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kr=null,Mr=null;function kp(t){td(t,0)}function pi(t){var e=Nn(t);if(pc(e))return t}function Sp(t,e){if(t==="change")return e}var qc=!1;if(yt){var Vi;if(yt){var Ki="oninput"in document;if(!Ki){var Ha=document.createElement("div");Ha.setAttribute("oninput","return;"),Ki=typeof Ha.oninput=="function"}Vi=Ki}else Vi=!1;qc=Vi&&(!document.documentMode||9<document.documentMode)}function Wa(){kr&&(kr.detachEvent("onpropertychange",Vc),Mr=kr=null)}function Vc(t){if(t.propertyName==="value"&&pi(Mr)){var e=[];Wc(e,Mr,t,Tl(t)),Ec(kp,e)}}function jp(t,e,n){t==="focusin"?(Wa(),kr=e,Mr=n,kr.attachEvent("onpropertychange",Vc)):t==="focusout"&&Wa()}function Ep(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pi(Mr)}function bp(t,e){if(t==="click")return pi(e)}function Cp(t,e){if(t==="input"||t==="change")return pi(e)}function Np(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nt=typeof Object.is=="function"?Object.is:Np;function zr(t,e){if(nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yo.call(e,s)||!nt(t[s],e[s]))return!1}return!0}function qa(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Va(t,e){var n=qa(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qa(n)}}function Kc(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kc(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gc(){for(var t=window,e=Ds();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ds(t.document)}return e}function zl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Tp(t){var e=Gc(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kc(n.ownerDocument.documentElement,n)){if(r!==null&&zl(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Va(n,i);var o=Va(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pp=yt&&"documentMode"in document&&11>=document.documentMode,bn=null,Mo=null,Sr=null,zo=!1;function Ka(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zo||bn==null||bn!==Ds(r)||(r=bn,"selectionStart"in r&&zl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sr&&zr(Sr,r)||(Sr=r,r=Vs(Mo,"onSelect"),0<r.length&&(e=new $l("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bn)))}function ds(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cn={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionend:ds("Transition","TransitionEnd")},Gi={},Qc={};yt&&(Qc=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);function mi(t){if(Gi[t])return Gi[t];if(!Cn[t])return t;var e=Cn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qc)return Gi[t]=e[n];return t}var Jc=mi("animationend"),Yc=mi("animationiteration"),Xc=mi("animationstart"),Zc=mi("transitionend"),ed=new Map,Ga="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(t,e){ed.set(t,e),dn(e,[t])}for(var Qi=0;Qi<Ga.length;Qi++){var Ji=Ga[Qi],Rp=Ji.toLowerCase(),Op=Ji[0].toUpperCase()+Ji.slice(1);qt(Rp,"on"+Op)}qt(Jc,"onAnimationEnd");qt(Yc,"onAnimationIteration");qt(Xc,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(Zc,"onTransitionEnd");Hn("onMouseEnter",["mouseout","mouseover"]);Hn("onMouseLeave",["mouseout","mouseover"]);Hn("onPointerEnter",["pointerout","pointerover"]);Hn("onPointerLeave",["pointerout","pointerover"]);dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ip=new Set("cancel close invalid load scroll toggle".split(" ").concat(vr));function Qa(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rf(r,e,void 0,t),t.currentTarget=null}function td(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Qa(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Qa(s,l,u),i=a}}}if(Fs)throw t=Io,Fs=!1,Io=null,t}function V(t,e){var n=e[Ho];n===void 0&&(n=e[Ho]=new Set);var r=t+"__bubble";n.has(r)||(nd(e,t,2,!1),n.add(r))}function Yi(t,e,n){var r=0;e&&(r|=4),nd(n,t,r,e)}var hs="_reactListening"+Math.random().toString(36).slice(2);function Dr(t){if(!t[hs]){t[hs]=!0,uc.forEach(function(n){n!=="selectionchange"&&(Ip.has(n)||Yi(n,!1,t),Yi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hs]||(e[hs]=!0,Yi("selectionchange",!1,e))}}function nd(t,e,n,r){switch(Dc(e)){case 1:var s=Kf;break;case 4:s=Gf;break;default:s=Il}n=s.bind(null,e,n,t),s=void 0,!Oo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xi(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=en(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ec(function(){var u=i,d=Tl(n),h=[];e:{var m=ed.get(t);if(m!==void 0){var y=$l,_=t;switch(t){case"keypress":if(Rs(n)===0)break e;case"keydown":case"keyup":y=up;break;case"focusin":_="focus",y=qi;break;case"focusout":_="blur",y=qi;break;case"beforeblur":case"afterblur":y=qi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Yf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=hp;break;case Jc:case Yc:case Xc:y=ep;break;case Zc:y=pp;break;case"scroll":y=Qf;break;case"wheel":y=gp;break;case"copy":case"cut":case"paste":y=np;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Da}var v=(e&4)!==0,k=!v&&t==="scroll",f=v?m!==null?m+"Capture":null:m;v=[];for(var p=u,g;p!==null;){g=p;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,f!==null&&(w=Ir(p,f),w!=null&&v.push(Ur(p,w,g)))),k)break;p=p.return}0<v.length&&(m=new y(m,_,null,n,d),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Po&&(_=n.relatedTarget||n.fromElement)&&(en(_)||_[wt]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=u,_=_?en(_):null,_!==null&&(k=hn(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=u),y!==_)){if(v=Ma,w="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(v=Da,w="onPointerLeave",f="onPointerEnter",p="pointer"),k=y==null?m:Nn(y),g=_==null?m:Nn(_),m=new v(w,p+"leave",y,n,d),m.target=k,m.relatedTarget=g,w=null,en(d)===u&&(v=new v(f,p+"enter",_,n,d),v.target=g,v.relatedTarget=k,w=v),k=w,y&&_)t:{for(v=y,f=_,p=0,g=v;g;g=vn(g))p++;for(g=0,w=f;w;w=vn(w))g++;for(;0<p-g;)v=vn(v),p--;for(;0<g-p;)f=vn(f),g--;for(;p--;){if(v===f||f!==null&&v===f.alternate)break t;v=vn(v),f=vn(f)}v=null}else v=null;y!==null&&Ja(h,m,y,v,!1),_!==null&&k!==null&&Ja(h,k,_,v,!0)}}e:{if(m=u?Nn(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=Sp;else if(Ba(m))if(qc)j=Cp;else{j=Ep;var E=jp}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=bp);if(j&&(j=j(t,u))){Wc(h,j,n,d);break e}E&&E(t,m,u),t==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&Eo(m,"number",m.value)}switch(E=u?Nn(u):window,t){case"focusin":(Ba(E)||E.contentEditable==="true")&&(bn=E,Mo=u,Sr=null);break;case"focusout":Sr=Mo=bn=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Ka(h,n,d);break;case"selectionchange":if(Pp)break;case"keydown":case"keyup":Ka(h,n,d)}var C;if(Ml)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else En?Bc(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Fc&&n.locale!=="ko"&&(En||P!=="onCompositionStart"?P==="onCompositionEnd"&&En&&(C=Uc()):(It=d,Al="value"in It?It.value:It.textContent,En=!0)),E=Vs(u,P),0<E.length&&(P=new za(P,t,null,n,d),h.push({event:P,listeners:E}),C?P.data=C:(C=Hc(n),C!==null&&(P.data=C)))),(C=yp?wp(t,n):_p(t,n))&&(u=Vs(u,"onBeforeInput"),0<u.length&&(d=new za("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}td(h,e)})}function Ur(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vs(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ir(t,n),i!=null&&r.unshift(Ur(t,i,s)),i=Ir(t,e),i!=null&&r.push(Ur(t,i,s))),t=t.return}return r}function vn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ja(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=Ir(n,i),a!=null&&o.unshift(Ur(n,a,l))):s||(a=Ir(n,i),a!=null&&o.push(Ur(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ap=/\r\n?/g,$p=/\u0000|\uFFFD/g;function Ya(t){return(typeof t=="string"?t:""+t).replace(Ap,`
`).replace($p,"")}function fs(t,e,n){if(e=Ya(e),Ya(t)!==e&&n)throw Error(S(425))}function Ks(){}var Do=null,Uo=null;function Fo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bo=typeof setTimeout=="function"?setTimeout:void 0,Lp=typeof clearTimeout=="function"?clearTimeout:void 0,Xa=typeof Promise=="function"?Promise:void 0,Mp=typeof queueMicrotask=="function"?queueMicrotask:typeof Xa<"u"?function(t){return Xa.resolve(null).then(t).catch(zp)}:Bo;function zp(t){setTimeout(function(){throw t})}function Zi(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Lr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lr(e)}function zt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Za(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),ot="__reactFiber$"+Zn,Fr="__reactProps$"+Zn,wt="__reactContainer$"+Zn,Ho="__reactEvents$"+Zn,Dp="__reactListeners$"+Zn,Up="__reactHandles$"+Zn;function en(t){var e=t[ot];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wt]||n[ot]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Za(t);t!==null;){if(n=t[ot])return n;t=Za(t)}return e}t=n,n=t.parentNode}return null}function Xr(t){return t=t[ot]||t[wt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function gi(t){return t[Fr]||null}var Wo=[],Tn=-1;function Vt(t){return{current:t}}function K(t){0>Tn||(t.current=Wo[Tn],Wo[Tn]=null,Tn--)}function q(t,e){Tn++,Wo[Tn]=t.current,t.current=e}var Wt={},we=Vt(Wt),Pe=Vt(!1),on=Wt;function Wn(t,e){var n=t.type.contextTypes;if(!n)return Wt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Re(t){return t=t.childContextTypes,t!=null}function Gs(){K(Pe),K(we)}function eu(t,e,n){if(we.current!==Wt)throw Error(S(168));q(we,e),q(Pe,n)}function rd(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(S(108,jf(t)||"Unknown",s));return ee({},n,r)}function Qs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wt,on=we.current,q(we,t),q(Pe,Pe.current),!0}function tu(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=rd(t,e,on),r.__reactInternalMemoizedMergedChildContext=t,K(Pe),K(we),q(we,t)):K(Pe),q(Pe,n)}var pt=null,vi=!1,eo=!1;function sd(t){pt===null?pt=[t]:pt.push(t)}function Fp(t){vi=!0,sd(t)}function Kt(){if(!eo&&pt!==null){eo=!0;var t=0,e=H;try{var n=pt;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pt=null,vi=!1}catch(s){throw pt!==null&&(pt=pt.slice(t+1)),Tc(Pl,Kt),s}finally{H=e,eo=!1}}return null}var Pn=[],Rn=0,Js=null,Ys=0,De=[],Ue=0,ln=null,mt=1,gt="";function Jt(t,e){Pn[Rn++]=Ys,Pn[Rn++]=Js,Js=t,Ys=e}function id(t,e,n){De[Ue++]=mt,De[Ue++]=gt,De[Ue++]=ln,ln=t;var r=mt;t=gt;var s=32-et(r)-1;r&=~(1<<s),n+=1;var i=32-et(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,mt=1<<32-et(e)+s|n<<s|r,gt=i+t}else mt=1<<i|n<<s|r,gt=t}function Dl(t){t.return!==null&&(Jt(t,1),id(t,1,0))}function Ul(t){for(;t===Js;)Js=Pn[--Rn],Pn[Rn]=null,Ys=Pn[--Rn],Pn[Rn]=null;for(;t===ln;)ln=De[--Ue],De[Ue]=null,gt=De[--Ue],De[Ue]=null,mt=De[--Ue],De[Ue]=null}var $e=null,Ae=null,Q=!1,Ze=null;function od(t,e){var n=Fe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$e=t,Ae=zt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$e=t,Ae=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ln!==null?{id:mt,overflow:gt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$e=t,Ae=null,!0):!1;default:return!1}}function qo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vo(t){if(Q){var e=Ae;if(e){var n=e;if(!nu(t,e)){if(qo(t))throw Error(S(418));e=zt(n.nextSibling);var r=$e;e&&nu(t,e)?od(r,n):(t.flags=t.flags&-4097|2,Q=!1,$e=t)}}else{if(qo(t))throw Error(S(418));t.flags=t.flags&-4097|2,Q=!1,$e=t}}}function ru(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$e=t}function ps(t){if(t!==$e)return!1;if(!Q)return ru(t),Q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fo(t.type,t.memoizedProps)),e&&(e=Ae)){if(qo(t))throw ld(),Error(S(418));for(;e;)od(t,e),e=zt(e.nextSibling)}if(ru(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ae=zt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ae=null}}else Ae=$e?zt(t.stateNode.nextSibling):null;return!0}function ld(){for(var t=Ae;t;)t=zt(t.nextSibling)}function qn(){Ae=$e=null,Q=!1}function Fl(t){Ze===null?Ze=[t]:Ze.push(t)}var Bp=kt.ReactCurrentBatchConfig;function cr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function ms(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function su(t){var e=t._init;return e(t._payload)}function ad(t){function e(f,p){if(t){var g=f.deletions;g===null?(f.deletions=[p],f.flags|=16):g.push(p)}}function n(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function s(f,p){return f=Bt(f,p),f.index=0,f.sibling=null,f}function i(f,p,g){return f.index=g,t?(g=f.alternate,g!==null?(g=g.index,g<p?(f.flags|=2,p):g):(f.flags|=2,p)):(f.flags|=1048576,p)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function l(f,p,g,w){return p===null||p.tag!==6?(p=lo(g,f.mode,w),p.return=f,p):(p=s(p,g),p.return=f,p)}function a(f,p,g,w){var j=g.type;return j===jn?d(f,p,g.props.children,w,g.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ct&&su(j)===p.type)?(w=s(p,g.props),w.ref=cr(f,p,g),w.return=f,w):(w=zs(g.type,g.key,g.props,null,f.mode,w),w.ref=cr(f,p,g),w.return=f,w)}function u(f,p,g,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=ao(g,f.mode,w),p.return=f,p):(p=s(p,g.children||[]),p.return=f,p)}function d(f,p,g,w,j){return p===null||p.tag!==7?(p=sn(g,f.mode,w,j),p.return=f,p):(p=s(p,g),p.return=f,p)}function h(f,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=lo(""+p,f.mode,g),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ss:return g=zs(p.type,p.key,p.props,null,f.mode,g),g.ref=cr(f,null,p),g.return=f,g;case Sn:return p=ao(p,f.mode,g),p.return=f,p;case Ct:var w=p._init;return h(f,w(p._payload),g)}if(mr(p)||ir(p))return p=sn(p,f.mode,g,null),p.return=f,p;ms(f,p)}return null}function m(f,p,g,w){var j=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:l(f,p,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ss:return g.key===j?a(f,p,g,w):null;case Sn:return g.key===j?u(f,p,g,w):null;case Ct:return j=g._init,m(f,p,j(g._payload),w)}if(mr(g)||ir(g))return j!==null?null:d(f,p,g,w,null);ms(f,g)}return null}function y(f,p,g,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return f=f.get(g)||null,l(p,f,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ss:return f=f.get(w.key===null?g:w.key)||null,a(p,f,w,j);case Sn:return f=f.get(w.key===null?g:w.key)||null,u(p,f,w,j);case Ct:var E=w._init;return y(f,p,g,E(w._payload),j)}if(mr(w)||ir(w))return f=f.get(g)||null,d(p,f,w,j,null);ms(p,w)}return null}function _(f,p,g,w){for(var j=null,E=null,C=p,P=p=0,G=null;C!==null&&P<g.length;P++){C.index>P?(G=C,C=null):G=C.sibling;var z=m(f,C,g[P],w);if(z===null){C===null&&(C=G);break}t&&C&&z.alternate===null&&e(f,C),p=i(z,p,P),E===null?j=z:E.sibling=z,E=z,C=G}if(P===g.length)return n(f,C),Q&&Jt(f,P),j;if(C===null){for(;P<g.length;P++)C=h(f,g[P],w),C!==null&&(p=i(C,p,P),E===null?j=C:E.sibling=C,E=C);return Q&&Jt(f,P),j}for(C=r(f,C);P<g.length;P++)G=y(C,f,P,g[P],w),G!==null&&(t&&G.alternate!==null&&C.delete(G.key===null?P:G.key),p=i(G,p,P),E===null?j=G:E.sibling=G,E=G);return t&&C.forEach(function(_e){return e(f,_e)}),Q&&Jt(f,P),j}function v(f,p,g,w){var j=ir(g);if(typeof j!="function")throw Error(S(150));if(g=j.call(g),g==null)throw Error(S(151));for(var E=j=null,C=p,P=p=0,G=null,z=g.next();C!==null&&!z.done;P++,z=g.next()){C.index>P?(G=C,C=null):G=C.sibling;var _e=m(f,C,z.value,w);if(_e===null){C===null&&(C=G);break}t&&C&&_e.alternate===null&&e(f,C),p=i(_e,p,P),E===null?j=_e:E.sibling=_e,E=_e,C=G}if(z.done)return n(f,C),Q&&Jt(f,P),j;if(C===null){for(;!z.done;P++,z=g.next())z=h(f,z.value,w),z!==null&&(p=i(z,p,P),E===null?j=z:E.sibling=z,E=z);return Q&&Jt(f,P),j}for(C=r(f,C);!z.done;P++,z=g.next())z=y(C,f,P,z.value,w),z!==null&&(t&&z.alternate!==null&&C.delete(z.key===null?P:z.key),p=i(z,p,P),E===null?j=z:E.sibling=z,E=z);return t&&C.forEach(function(St){return e(f,St)}),Q&&Jt(f,P),j}function k(f,p,g,w){if(typeof g=="object"&&g!==null&&g.type===jn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ss:e:{for(var j=g.key,E=p;E!==null;){if(E.key===j){if(j=g.type,j===jn){if(E.tag===7){n(f,E.sibling),p=s(E,g.props.children),p.return=f,f=p;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ct&&su(j)===E.type){n(f,E.sibling),p=s(E,g.props),p.ref=cr(f,E,g),p.return=f,f=p;break e}n(f,E);break}else e(f,E);E=E.sibling}g.type===jn?(p=sn(g.props.children,f.mode,w,g.key),p.return=f,f=p):(w=zs(g.type,g.key,g.props,null,f.mode,w),w.ref=cr(f,p,g),w.return=f,f=w)}return o(f);case Sn:e:{for(E=g.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(f,p.sibling),p=s(p,g.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else e(f,p);p=p.sibling}p=ao(g,f.mode,w),p.return=f,f=p}return o(f);case Ct:return E=g._init,k(f,p,E(g._payload),w)}if(mr(g))return _(f,p,g,w);if(ir(g))return v(f,p,g,w);ms(f,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(f,p.sibling),p=s(p,g),p.return=f,f=p):(n(f,p),p=lo(g,f.mode,w),p.return=f,f=p),o(f)):n(f,p)}return k}var Vn=ad(!0),ud=ad(!1),Xs=Vt(null),Zs=null,On=null,Bl=null;function Hl(){Bl=On=Zs=null}function Wl(t){var e=Xs.current;K(Xs),t._currentValue=e}function Ko(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Un(t,e){Zs=t,Bl=On=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Te=!0),t.firstContext=null)}function We(t){var e=t._currentValue;if(Bl!==t)if(t={context:t,memoizedValue:e,next:null},On===null){if(Zs===null)throw Error(S(308));On=t,Zs.dependencies={lanes:0,firstContext:t}}else On=On.next=t;return e}var tn=null;function ql(t){tn===null?tn=[t]:tn.push(t)}function cd(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ql(e)):(n.next=s.next,s.next=n),e.interleaved=n,_t(t,r)}function _t(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nt=!1;function Vl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_t(t,n)}return s=r.interleaved,s===null?(e.next=e,ql(r)):(e.next=s.next,s.next=e),r.interleaved=e,_t(t,n)}function Os(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rl(t,n)}}function iu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ei(t,e,n,r){var s=t.updateQueue;Nt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(i!==null){var h=s.baseState;o=0,d=u=a=null,l=i;do{var m=l.lane,y=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,v=l;switch(m=e,y=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){h=_.call(y,h,m);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,m=typeof _=="function"?_.call(y,h,m):_,m==null)break e;h=ee({},h,m);break e;case 2:Nt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,a=h):d=d.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);un|=o,t.lanes=o,t.memoizedState=h}}function ou(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(S(191,s));s.call(r)}}}var Zr={},at=Vt(Zr),Br=Vt(Zr),Hr=Vt(Zr);function nn(t){if(t===Zr)throw Error(S(174));return t}function Kl(t,e){switch(q(Hr,e),q(Br,t),q(at,Zr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Co(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Co(e,t)}K(at),q(at,e)}function Kn(){K(at),K(Br),K(Hr)}function hd(t){nn(Hr.current);var e=nn(at.current),n=Co(e,t.type);e!==n&&(q(Br,t),q(at,n))}function Gl(t){Br.current===t&&(K(at),K(Br))}var X=Vt(0);function ti(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var to=[];function Ql(){for(var t=0;t<to.length;t++)to[t]._workInProgressVersionPrimary=null;to.length=0}var Is=kt.ReactCurrentDispatcher,no=kt.ReactCurrentBatchConfig,an=0,Z=null,oe=null,ue=null,ni=!1,jr=!1,Wr=0,Hp=0;function me(){throw Error(S(321))}function Jl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nt(t[n],e[n]))return!1;return!0}function Yl(t,e,n,r,s,i){if(an=i,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Is.current=t===null||t.memoizedState===null?Kp:Gp,t=n(r,s),jr){i=0;do{if(jr=!1,Wr=0,25<=i)throw Error(S(301));i+=1,ue=oe=null,e.updateQueue=null,Is.current=Qp,t=n(r,s)}while(jr)}if(Is.current=ri,e=oe!==null&&oe.next!==null,an=0,ue=oe=Z=null,ni=!1,e)throw Error(S(300));return t}function Xl(){var t=Wr!==0;return Wr=0,t}function it(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?Z.memoizedState=ue=t:ue=ue.next=t,ue}function qe(){if(oe===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=oe.next;var e=ue===null?Z.memoizedState:ue.next;if(e!==null)ue=e,oe=t;else{if(t===null)throw Error(S(310));oe=t,t={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},ue===null?Z.memoizedState=ue=t:ue=ue.next=t}return ue}function qr(t,e){return typeof e=="function"?e(t):e}function ro(t){var e=qe(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=oe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var d=u.lane;if((an&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,Z.lanes|=d,un|=d}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,nt(r,e.memoizedState)||(Te=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Z.lanes|=i,un|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function so(t){var e=qe(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);nt(i,e.memoizedState)||(Te=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fd(){}function pd(t,e){var n=Z,r=qe(),s=e(),i=!nt(r.memoizedState,s);if(i&&(r.memoizedState=s,Te=!0),r=r.queue,Zl(vd.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ue!==null&&ue.memoizedState.tag&1){if(n.flags|=2048,Vr(9,gd.bind(null,n,r,s,e),void 0,null),ce===null)throw Error(S(349));an&30||md(n,e,s)}return s}function md(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gd(t,e,n,r){e.value=n,e.getSnapshot=r,yd(e)&&wd(t)}function vd(t,e,n){return n(function(){yd(e)&&wd(t)})}function yd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nt(t,n)}catch{return!0}}function wd(t){var e=_t(t,1);e!==null&&tt(e,t,1,-1)}function lu(t){var e=it();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:t},e.queue=t,t=t.dispatch=Vp.bind(null,Z,t),[e.memoizedState,t]}function Vr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _d(){return qe().memoizedState}function As(t,e,n,r){var s=it();Z.flags|=t,s.memoizedState=Vr(1|e,n,void 0,r===void 0?null:r)}function yi(t,e,n,r){var s=qe();r=r===void 0?null:r;var i=void 0;if(oe!==null){var o=oe.memoizedState;if(i=o.destroy,r!==null&&Jl(r,o.deps)){s.memoizedState=Vr(e,n,i,r);return}}Z.flags|=t,s.memoizedState=Vr(1|e,n,i,r)}function au(t,e){return As(8390656,8,t,e)}function Zl(t,e){return yi(2048,8,t,e)}function xd(t,e){return yi(4,2,t,e)}function kd(t,e){return yi(4,4,t,e)}function Sd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jd(t,e,n){return n=n!=null?n.concat([t]):null,yi(4,4,Sd.bind(null,e,t),n)}function ea(){}function Ed(t,e){var n=qe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jl(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bd(t,e){var n=qe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jl(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cd(t,e,n){return an&21?(nt(n,e)||(n=Oc(),Z.lanes|=n,un|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Te=!0),t.memoizedState=n)}function Wp(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=no.transition;no.transition={};try{t(!1),e()}finally{H=n,no.transition=r}}function Nd(){return qe().memoizedState}function qp(t,e,n){var r=Ft(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Td(t))Pd(e,n);else if(n=cd(t,e,n,r),n!==null){var s=Se();tt(n,t,r,s),Rd(n,e,r)}}function Vp(t,e,n){var r=Ft(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Td(t))Pd(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,nt(l,o)){var a=e.interleaved;a===null?(s.next=s,ql(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=cd(t,e,s,r),n!==null&&(s=Se(),tt(n,t,r,s),Rd(n,e,r))}}function Td(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function Pd(t,e){jr=ni=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rd(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rl(t,n)}}var ri={readContext:We,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Kp={readContext:We,useCallback:function(t,e){return it().memoizedState=[t,e===void 0?null:e],t},useContext:We,useEffect:au,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,As(4194308,4,Sd.bind(null,e,t),n)},useLayoutEffect:function(t,e){return As(4194308,4,t,e)},useInsertionEffect:function(t,e){return As(4,2,t,e)},useMemo:function(t,e){var n=it();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=it();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qp.bind(null,Z,t),[r.memoizedState,t]},useRef:function(t){var e=it();return t={current:t},e.memoizedState=t},useState:lu,useDebugValue:ea,useDeferredValue:function(t){return it().memoizedState=t},useTransition:function(){var t=lu(!1),e=t[0];return t=Wp.bind(null,t[1]),it().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Z,s=it();if(Q){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),ce===null)throw Error(S(349));an&30||md(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,au(vd.bind(null,r,i,t),[t]),r.flags|=2048,Vr(9,gd.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=it(),e=ce.identifierPrefix;if(Q){var n=gt,r=mt;n=(r&~(1<<32-et(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hp++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gp={readContext:We,useCallback:Ed,useContext:We,useEffect:Zl,useImperativeHandle:jd,useInsertionEffect:xd,useLayoutEffect:kd,useMemo:bd,useReducer:ro,useRef:_d,useState:function(){return ro(qr)},useDebugValue:ea,useDeferredValue:function(t){var e=qe();return Cd(e,oe.memoizedState,t)},useTransition:function(){var t=ro(qr)[0],e=qe().memoizedState;return[t,e]},useMutableSource:fd,useSyncExternalStore:pd,useId:Nd,unstable_isNewReconciler:!1},Qp={readContext:We,useCallback:Ed,useContext:We,useEffect:Zl,useImperativeHandle:jd,useInsertionEffect:xd,useLayoutEffect:kd,useMemo:bd,useReducer:so,useRef:_d,useState:function(){return so(qr)},useDebugValue:ea,useDeferredValue:function(t){var e=qe();return oe===null?e.memoizedState=t:Cd(e,oe.memoizedState,t)},useTransition:function(){var t=so(qr)[0],e=qe().memoizedState;return[t,e]},useMutableSource:fd,useSyncExternalStore:pd,useId:Nd,unstable_isNewReconciler:!1};function Je(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Go(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wi={isMounted:function(t){return(t=t._reactInternals)?hn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Se(),s=Ft(t),i=vt(r,s);i.payload=e,n!=null&&(i.callback=n),e=Dt(t,i,s),e!==null&&(tt(e,t,s,r),Os(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Se(),s=Ft(t),i=vt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Dt(t,i,s),e!==null&&(tt(e,t,s,r),Os(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Se(),r=Ft(t),s=vt(n,r);s.tag=2,e!=null&&(s.callback=e),e=Dt(t,s,r),e!==null&&(tt(e,t,r,n),Os(e,t,r))}};function uu(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!zr(n,r)||!zr(s,i):!0}function Od(t,e,n){var r=!1,s=Wt,i=e.contextType;return typeof i=="object"&&i!==null?i=We(i):(s=Re(e)?on:we.current,r=e.contextTypes,i=(r=r!=null)?Wn(t,s):Wt),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wi,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function cu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wi.enqueueReplaceState(e,e.state,null)}function Qo(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vl(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=We(i):(i=Re(e)?on:we.current,s.context=Wn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Go(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wi.enqueueReplaceState(s,s.state,null),ei(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Gn(t,e){try{var n="",r=e;do n+=Sf(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function io(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Jp=typeof WeakMap=="function"?WeakMap:Map;function Id(t,e,n){n=vt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ii||(ii=!0,ol=r),Jo(t,e)},n}function Ad(t,e,n){n=vt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Jo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Jo(t,e),typeof r!="function"&&(Ut===null?Ut=new Set([this]):Ut.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function du(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Jp;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cm.bind(null,t,e,n),e.then(t,t))}function hu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fu(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vt(-1,1),e.tag=2,Dt(n,e,1))),n.lanes|=1),t)}var Yp=kt.ReactCurrentOwner,Te=!1;function ke(t,e,n,r){e.child=t===null?ud(e,null,n,r):Vn(e,t.child,n,r)}function pu(t,e,n,r,s){n=n.render;var i=e.ref;return Un(e,s),r=Yl(t,e,n,r,i,s),n=Xl(),t!==null&&!Te?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xt(t,e,s)):(Q&&n&&Dl(e),e.flags|=1,ke(t,e,r,s),e.child)}function mu(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!aa(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$d(t,e,i,r,s)):(t=zs(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zr,n(o,r)&&t.ref===e.ref)return xt(t,e,s)}return e.flags|=1,t=Bt(i,r),t.ref=e.ref,t.return=e,e.child=t}function $d(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(zr(i,r)&&t.ref===e.ref)if(Te=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Te=!0);else return e.lanes=t.lanes,xt(t,e,s)}return Yo(t,e,n,r,s)}function Ld(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(An,Ie),Ie|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,q(An,Ie),Ie|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,q(An,Ie),Ie|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,q(An,Ie),Ie|=r;return ke(t,e,s,n),e.child}function Md(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yo(t,e,n,r,s){var i=Re(n)?on:we.current;return i=Wn(e,i),Un(e,s),n=Yl(t,e,n,r,i,s),r=Xl(),t!==null&&!Te?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xt(t,e,s)):(Q&&r&&Dl(e),e.flags|=1,ke(t,e,n,s),e.child)}function gu(t,e,n,r,s){if(Re(n)){var i=!0;Qs(e)}else i=!1;if(Un(e,s),e.stateNode===null)$s(t,e),Od(e,n,r),Qo(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=We(u):(u=Re(n)?on:we.current,u=Wn(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&cu(e,o,r,u),Nt=!1;var m=e.memoizedState;o.state=m,ei(e,r,o,s),a=e.memoizedState,l!==r||m!==a||Pe.current||Nt?(typeof d=="function"&&(Go(e,n,d,r),a=e.memoizedState),(l=Nt||uu(e,n,l,r,m,a,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dd(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Je(e.type,l),o.props=u,h=e.pendingProps,m=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=We(a):(a=Re(n)?on:we.current,a=Wn(e,a));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==a)&&cu(e,o,r,a),Nt=!1,m=e.memoizedState,o.state=m,ei(e,r,o,s);var _=e.memoizedState;l!==h||m!==_||Pe.current||Nt?(typeof y=="function"&&(Go(e,n,y,r),_=e.memoizedState),(u=Nt||uu(e,n,u,r,m,_,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Xo(t,e,n,r,i,s)}function Xo(t,e,n,r,s,i){Md(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tu(e,n,!1),xt(t,e,i);r=e.stateNode,Yp.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vn(e,t.child,null,i),e.child=Vn(e,null,l,i)):ke(t,e,l,i),e.memoizedState=r.state,s&&tu(e,n,!0),e.child}function zd(t){var e=t.stateNode;e.pendingContext?eu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eu(t,e.context,!1),Kl(t,e.containerInfo)}function vu(t,e,n,r,s){return qn(),Fl(s),e.flags|=256,ke(t,e,n,r),e.child}var Zo={dehydrated:null,treeContext:null,retryLane:0};function el(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dd(t,e,n){var r=e.pendingProps,s=X.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),q(X,s&1),t===null)return Vo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ki(o,r,0,null),t=sn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=el(n),e.memoizedState=Zo,t):ta(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Xp(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Bt(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Bt(l,i):(i=sn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?el(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zo,r}return i=t.child,t=i.sibling,r=Bt(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ta(t,e){return e=ki({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gs(t,e,n,r){return r!==null&&Fl(r),Vn(e,t.child,null,n),t=ta(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xp(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=io(Error(S(422))),gs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ki({mode:"visible",children:r.children},s,0,null),i=sn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Vn(e,t.child,null,o),e.child.memoizedState=el(o),e.memoizedState=Zo,i);if(!(e.mode&1))return gs(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(S(419)),r=io(i,r,void 0),gs(t,e,o,r)}if(l=(o&t.childLanes)!==0,Te||l){if(r=ce,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_t(t,s),tt(r,t,s,-1))}return la(),r=io(Error(S(421))),gs(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dm.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ae=zt(s.nextSibling),$e=e,Q=!0,Ze=null,t!==null&&(De[Ue++]=mt,De[Ue++]=gt,De[Ue++]=ln,mt=t.id,gt=t.overflow,ln=e),e=ta(e,r.children),e.flags|=4096,e)}function yu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ko(t.return,e,n)}function oo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ud(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ke(t,e,r.children,n),r=X.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yu(t,n,e);else if(t.tag===19)yu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(q(X,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ti(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),oo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ti(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}oo(e,!0,n,null,i);break;case"together":oo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $s(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),un|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=Bt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Zp(t,e,n){switch(e.tag){case 3:zd(e),qn();break;case 5:hd(e);break;case 1:Re(e.type)&&Qs(e);break;case 4:Kl(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;q(Xs,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(q(X,X.current&1),e.flags|=128,null):n&e.child.childLanes?Dd(t,e,n):(q(X,X.current&1),t=xt(t,e,n),t!==null?t.sibling:null);q(X,X.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ud(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(X,X.current),r)break;return null;case 22:case 23:return e.lanes=0,Ld(t,e,n)}return xt(t,e,n)}var Fd,tl,Bd,Hd;Fd=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tl=function(){};Bd=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,nn(at.current);var i=null;switch(n){case"input":s=So(t,s),r=So(t,r),i=[];break;case"select":s=ee({},s,{value:void 0}),r=ee({},r,{value:void 0}),i=[];break;case"textarea":s=bo(t,s),r=bo(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ks)}No(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rr.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&V("scroll",t),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Hd=function(t,e,n,r){n!==r&&(e.flags|=4)};function dr(t,e){if(!Q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function em(t,e,n){var r=e.pendingProps;switch(Ul(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(e),null;case 1:return Re(e.type)&&Gs(),ge(e),null;case 3:return r=e.stateNode,Kn(),K(Pe),K(we),Ql(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ps(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ze!==null&&(ul(Ze),Ze=null))),tl(t,e),ge(e),null;case 5:Gl(e);var s=nn(Hr.current);if(n=e.type,t!==null&&e.stateNode!=null)Bd(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return ge(e),null}if(t=nn(at.current),ps(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ot]=e,r[Fr]=i,t=(e.mode&1)!==0,n){case"dialog":V("cancel",r),V("close",r);break;case"iframe":case"object":case"embed":V("load",r);break;case"video":case"audio":for(s=0;s<vr.length;s++)V(vr[s],r);break;case"source":V("error",r);break;case"img":case"image":case"link":V("error",r),V("load",r);break;case"details":V("toggle",r);break;case"input":Ca(r,i),V("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},V("invalid",r);break;case"textarea":Ta(r,i),V("invalid",r)}No(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&fs(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&fs(r.textContent,l,t),s=["children",""+l]):Rr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&V("scroll",r)}switch(n){case"input":is(r),Na(r,i,!0);break;case"textarea":is(r),Pa(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ks)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ot]=e,t[Fr]=r,Fd(t,e,!1,!1),e.stateNode=t;e:{switch(o=To(n,r),n){case"dialog":V("cancel",t),V("close",t),s=r;break;case"iframe":case"object":case"embed":V("load",t),s=r;break;case"video":case"audio":for(s=0;s<vr.length;s++)V(vr[s],t);s=r;break;case"source":V("error",t),s=r;break;case"img":case"image":case"link":V("error",t),V("load",t),s=r;break;case"details":V("toggle",t),s=r;break;case"input":Ca(t,r),s=So(t,r),V("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ee({},r,{value:void 0}),V("invalid",t);break;case"textarea":Ta(t,r),s=bo(t,r),V("invalid",t);break;default:s=r}No(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?_c(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&yc(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Or(t,a):typeof a=="number"&&Or(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rr.hasOwnProperty(i)?a!=null&&i==="onScroll"&&V("scroll",t):a!=null&&El(t,i,a,o))}switch(n){case"input":is(t),Na(t,r,!1);break;case"textarea":is(t),Pa(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ht(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ln(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ln(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ks)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ge(e),null;case 6:if(t&&e.stateNode!=null)Hd(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=nn(Hr.current),nn(at.current),ps(e)){if(r=e.stateNode,n=e.memoizedProps,r[ot]=e,(i=r.nodeValue!==n)&&(t=$e,t!==null))switch(t.tag){case 3:fs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fs(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ot]=e,e.stateNode=r}return ge(e),null;case 13:if(K(X),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Q&&Ae!==null&&e.mode&1&&!(e.flags&128))ld(),qn(),e.flags|=98560,i=!1;else if(i=ps(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(S(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(S(317));i[ot]=e}else qn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ge(e),i=!1}else Ze!==null&&(ul(Ze),Ze=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||X.current&1?le===0&&(le=3):la())),e.updateQueue!==null&&(e.flags|=4),ge(e),null);case 4:return Kn(),tl(t,e),t===null&&Dr(e.stateNode.containerInfo),ge(e),null;case 10:return Wl(e.type._context),ge(e),null;case 17:return Re(e.type)&&Gs(),ge(e),null;case 19:if(K(X),i=e.memoizedState,i===null)return ge(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)dr(i,!1);else{if(le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ti(t),o!==null){for(e.flags|=128,dr(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return q(X,X.current&1|2),e.child}t=t.sibling}i.tail!==null&&re()>Qn&&(e.flags|=128,r=!0,dr(i,!1),e.lanes=4194304)}else{if(!r)if(t=ti(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),dr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Q)return ge(e),null}else 2*re()-i.renderingStartTime>Qn&&n!==1073741824&&(e.flags|=128,r=!0,dr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=re(),e.sibling=null,n=X.current,q(X,r?n&1|2:n&1),e):(ge(e),null);case 22:case 23:return oa(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ie&1073741824&&(ge(e),e.subtreeFlags&6&&(e.flags|=8192)):ge(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function tm(t,e){switch(Ul(e),e.tag){case 1:return Re(e.type)&&Gs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kn(),K(Pe),K(we),Ql(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gl(e),null;case 13:if(K(X),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));qn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(X),null;case 4:return Kn(),null;case 10:return Wl(e.type._context),null;case 22:case 23:return oa(),null;case 24:return null;default:return null}}var vs=!1,ye=!1,nm=typeof WeakSet=="function"?WeakSet:Set,T=null;function In(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(t,e,r)}else n.current=null}function nl(t,e,n){try{n()}catch(r){te(t,e,r)}}var wu=!1;function rm(t,e){if(Do=Ws,t=Gc(),zl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===n&&++u===s&&(l=o),m===i&&++d===r&&(a=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uo={focusedElem:t,selectionRange:n},Ws=!1,T=e;T!==null;)if(e=T,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,T=t;else for(;T!==null;){e=T;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,k=_.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?v:Je(e.type,v),k);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(w){te(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,T=t;break}T=e.return}return _=wu,wu=!1,_}function Er(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&nl(e,n,i)}s=s.next}while(s!==r)}}function _i(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wd(t){var e=t.alternate;e!==null&&(t.alternate=null,Wd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ot],delete e[Fr],delete e[Ho],delete e[Dp],delete e[Up])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qd(t){return t.tag===5||t.tag===3||t.tag===4}function _u(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ks));else if(r!==4&&(t=t.child,t!==null))for(sl(t,e,n),t=t.sibling;t!==null;)sl(t,e,n),t=t.sibling}function il(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(il(t,e,n),t=t.sibling;t!==null;)il(t,e,n),t=t.sibling}var de=null,Ye=!1;function jt(t,e,n){for(n=n.child;n!==null;)Vd(t,e,n),n=n.sibling}function Vd(t,e,n){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(hi,n)}catch{}switch(n.tag){case 5:ye||In(n,e);case 6:var r=de,s=Ye;de=null,jt(t,e,n),de=r,Ye=s,de!==null&&(Ye?(t=de,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):de.removeChild(n.stateNode));break;case 18:de!==null&&(Ye?(t=de,n=n.stateNode,t.nodeType===8?Zi(t.parentNode,n):t.nodeType===1&&Zi(t,n),Lr(t)):Zi(de,n.stateNode));break;case 4:r=de,s=Ye,de=n.stateNode.containerInfo,Ye=!0,jt(t,e,n),de=r,Ye=s;break;case 0:case 11:case 14:case 15:if(!ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nl(n,e,o),s=s.next}while(s!==r)}jt(t,e,n);break;case 1:if(!ye&&(In(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){te(n,e,l)}jt(t,e,n);break;case 21:jt(t,e,n);break;case 22:n.mode&1?(ye=(r=ye)||n.memoizedState!==null,jt(t,e,n),ye=r):jt(t,e,n);break;default:jt(t,e,n)}}function xu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nm),e.forEach(function(r){var s=hm.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ge(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:de=l.stateNode,Ye=!1;break e;case 3:de=l.stateNode.containerInfo,Ye=!0;break e;case 4:de=l.stateNode.containerInfo,Ye=!0;break e}l=l.return}if(de===null)throw Error(S(160));Vd(i,o,s),de=null,Ye=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){te(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kd(e,t),e=e.sibling}function Kd(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ge(e,t),st(t),r&4){try{Er(3,t,t.return),_i(3,t)}catch(v){te(t,t.return,v)}try{Er(5,t,t.return)}catch(v){te(t,t.return,v)}}break;case 1:Ge(e,t),st(t),r&512&&n!==null&&In(n,n.return);break;case 5:if(Ge(e,t),st(t),r&512&&n!==null&&In(n,n.return),t.flags&32){var s=t.stateNode;try{Or(s,"")}catch(v){te(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&mc(s,i),To(l,o);var u=To(l,i);for(o=0;o<a.length;o+=2){var d=a[o],h=a[o+1];d==="style"?_c(s,h):d==="dangerouslySetInnerHTML"?yc(s,h):d==="children"?Or(s,h):El(s,d,h,u)}switch(l){case"input":jo(s,i);break;case"textarea":gc(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ln(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ln(s,!!i.multiple,i.defaultValue,!0):Ln(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fr]=i}catch(v){te(t,t.return,v)}}break;case 6:if(Ge(e,t),st(t),r&4){if(t.stateNode===null)throw Error(S(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){te(t,t.return,v)}}break;case 3:if(Ge(e,t),st(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lr(e.containerInfo)}catch(v){te(t,t.return,v)}break;case 4:Ge(e,t),st(t);break;case 13:Ge(e,t),st(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sa=re())),r&4&&xu(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ye=(u=ye)||d,Ge(e,t),ye=u):Ge(e,t),st(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(T=t,d=t.child;d!==null;){for(h=T=d;T!==null;){switch(m=T,y=m.child,m.tag){case 0:case 11:case 14:case 15:Er(4,m,m.return);break;case 1:In(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){te(r,n,v)}}break;case 5:In(m,m.return);break;case 22:if(m.memoizedState!==null){Su(h);continue}}y!==null?(y.return=m,T=y):Su(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=wc("display",o))}catch(v){te(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){te(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ge(e,t),st(t),r&4&&xu(t);break;case 21:break;default:Ge(e,t),st(t)}}function st(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qd(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Or(s,""),r.flags&=-33);var i=_u(t);il(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=_u(t);sl(t,l,o);break;default:throw Error(S(161))}}catch(a){te(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sm(t,e,n){T=t,Gd(t)}function Gd(t,e,n){for(var r=(t.mode&1)!==0;T!==null;){var s=T,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||vs;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||ye;l=vs;var u=ye;if(vs=o,(ye=a)&&!u)for(T=s;T!==null;)o=T,a=o.child,o.tag===22&&o.memoizedState!==null?ju(s):a!==null?(a.return=o,T=a):ju(s);for(;i!==null;)T=i,Gd(i),i=i.sibling;T=s,vs=l,ye=u}ku(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,T=i):ku(t)}}function ku(t){for(;T!==null;){var e=T;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ye||_i(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ye)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Je(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ou(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ou(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Lr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}ye||e.flags&512&&rl(e)}catch(m){te(e,e.return,m)}}if(e===t){T=null;break}if(n=e.sibling,n!==null){n.return=e.return,T=n;break}T=e.return}}function Su(t){for(;T!==null;){var e=T;if(e===t){T=null;break}var n=e.sibling;if(n!==null){n.return=e.return,T=n;break}T=e.return}}function ju(t){for(;T!==null;){var e=T;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_i(4,e)}catch(a){te(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){te(e,s,a)}}var i=e.return;try{rl(e)}catch(a){te(e,i,a)}break;case 5:var o=e.return;try{rl(e)}catch(a){te(e,o,a)}}}catch(a){te(e,e.return,a)}if(e===t){T=null;break}var l=e.sibling;if(l!==null){l.return=e.return,T=l;break}T=e.return}}var im=Math.ceil,si=kt.ReactCurrentDispatcher,na=kt.ReactCurrentOwner,Be=kt.ReactCurrentBatchConfig,B=0,ce=null,ie=null,he=0,Ie=0,An=Vt(0),le=0,Kr=null,un=0,xi=0,ra=0,br=null,Ce=null,sa=0,Qn=1/0,ht=null,ii=!1,ol=null,Ut=null,ys=!1,At=null,oi=0,Cr=0,ll=null,Ls=-1,Ms=0;function Se(){return B&6?re():Ls!==-1?Ls:Ls=re()}function Ft(t){return t.mode&1?B&2&&he!==0?he&-he:Bp.transition!==null?(Ms===0&&(Ms=Oc()),Ms):(t=H,t!==0||(t=window.event,t=t===void 0?16:Dc(t.type)),t):1}function tt(t,e,n,r){if(50<Cr)throw Cr=0,ll=null,Error(S(185));Jr(t,n,r),(!(B&2)||t!==ce)&&(t===ce&&(!(B&2)&&(xi|=n),le===4&&Rt(t,he)),Oe(t,r),n===1&&B===0&&!(e.mode&1)&&(Qn=re()+500,vi&&Kt()))}function Oe(t,e){var n=t.callbackNode;Bf(t,e);var r=Hs(t,t===ce?he:0);if(r===0)n!==null&&Ia(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ia(n),e===1)t.tag===0?Fp(Eu.bind(null,t)):sd(Eu.bind(null,t)),Mp(function(){!(B&6)&&Kt()}),n=null;else{switch(Ic(r)){case 1:n=Pl;break;case 4:n=Pc;break;case 16:n=Bs;break;case 536870912:n=Rc;break;default:n=Bs}n=nh(n,Qd.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qd(t,e){if(Ls=-1,Ms=0,B&6)throw Error(S(327));var n=t.callbackNode;if(Fn()&&t.callbackNode!==n)return null;var r=Hs(t,t===ce?he:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=li(t,r);else{e=r;var s=B;B|=2;var i=Yd();(ce!==t||he!==e)&&(ht=null,Qn=re()+500,rn(t,e));do try{am();break}catch(l){Jd(t,l)}while(!0);Hl(),si.current=i,B=s,ie!==null?e=0:(ce=null,he=0,e=le)}if(e!==0){if(e===2&&(s=Ao(t),s!==0&&(r=s,e=al(t,s))),e===1)throw n=Kr,rn(t,0),Rt(t,r),Oe(t,re()),n;if(e===6)Rt(t,r);else{if(s=t.current.alternate,!(r&30)&&!om(s)&&(e=li(t,r),e===2&&(i=Ao(t),i!==0&&(r=i,e=al(t,i))),e===1))throw n=Kr,rn(t,0),Rt(t,r),Oe(t,re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:Yt(t,Ce,ht);break;case 3:if(Rt(t,r),(r&130023424)===r&&(e=sa+500-re(),10<e)){if(Hs(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Se(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bo(Yt.bind(null,t,Ce,ht),e);break}Yt(t,Ce,ht);break;case 4:if(Rt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-et(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*im(r/1960))-r,10<r){t.timeoutHandle=Bo(Yt.bind(null,t,Ce,ht),r);break}Yt(t,Ce,ht);break;case 5:Yt(t,Ce,ht);break;default:throw Error(S(329))}}}return Oe(t,re()),t.callbackNode===n?Qd.bind(null,t):null}function al(t,e){var n=br;return t.current.memoizedState.isDehydrated&&(rn(t,e).flags|=256),t=li(t,e),t!==2&&(e=Ce,Ce=n,e!==null&&ul(e)),t}function ul(t){Ce===null?Ce=t:Ce.push.apply(Ce,t)}function om(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rt(t,e){for(e&=~ra,e&=~xi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-et(e),r=1<<n;t[n]=-1,e&=~r}}function Eu(t){if(B&6)throw Error(S(327));Fn();var e=Hs(t,0);if(!(e&1))return Oe(t,re()),null;var n=li(t,e);if(t.tag!==0&&n===2){var r=Ao(t);r!==0&&(e=r,n=al(t,r))}if(n===1)throw n=Kr,rn(t,0),Rt(t,e),Oe(t,re()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yt(t,Ce,ht),Oe(t,re()),null}function ia(t,e){var n=B;B|=1;try{return t(e)}finally{B=n,B===0&&(Qn=re()+500,vi&&Kt())}}function cn(t){At!==null&&At.tag===0&&!(B&6)&&Fn();var e=B;B|=1;var n=Be.transition,r=H;try{if(Be.transition=null,H=1,t)return t()}finally{H=r,Be.transition=n,B=e,!(B&6)&&Kt()}}function oa(){Ie=An.current,K(An)}function rn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Lp(n)),ie!==null)for(n=ie.return;n!==null;){var r=n;switch(Ul(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gs();break;case 3:Kn(),K(Pe),K(we),Ql();break;case 5:Gl(r);break;case 4:Kn();break;case 13:K(X);break;case 19:K(X);break;case 10:Wl(r.type._context);break;case 22:case 23:oa()}n=n.return}if(ce=t,ie=t=Bt(t.current,null),he=Ie=e,le=0,Kr=null,ra=xi=un=0,Ce=br=null,tn!==null){for(e=0;e<tn.length;e++)if(n=tn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}tn=null}return t}function Jd(t,e){do{var n=ie;try{if(Hl(),Is.current=ri,ni){for(var r=Z.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ni=!1}if(an=0,ue=oe=Z=null,jr=!1,Wr=0,na.current=null,n===null||n.return===null){le=1,Kr=e,ie=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=he,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=hu(o);if(y!==null){y.flags&=-257,fu(y,o,l,i,e),y.mode&1&&du(i,u,e),e=y,a=u;var _=e.updateQueue;if(_===null){var v=new Set;v.add(a),e.updateQueue=v}else _.add(a);break e}else{if(!(e&1)){du(i,u,e),la();break e}a=Error(S(426))}}else if(Q&&l.mode&1){var k=hu(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),fu(k,o,l,i,e),Fl(Gn(a,l));break e}}i=a=Gn(a,l),le!==4&&(le=2),br===null?br=[i]:br.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=Id(i,a,e);iu(i,f);break e;case 1:l=a;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ut===null||!Ut.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Ad(i,l,e);iu(i,w);break e}}i=i.return}while(i!==null)}Zd(n)}catch(j){e=j,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(!0)}function Yd(){var t=si.current;return si.current=ri,t===null?ri:t}function la(){(le===0||le===3||le===2)&&(le=4),ce===null||!(un&268435455)&&!(xi&268435455)||Rt(ce,he)}function li(t,e){var n=B;B|=2;var r=Yd();(ce!==t||he!==e)&&(ht=null,rn(t,e));do try{lm();break}catch(s){Jd(t,s)}while(!0);if(Hl(),B=n,si.current=r,ie!==null)throw Error(S(261));return ce=null,he=0,le}function lm(){for(;ie!==null;)Xd(ie)}function am(){for(;ie!==null&&!If();)Xd(ie)}function Xd(t){var e=th(t.alternate,t,Ie);t.memoizedProps=t.pendingProps,e===null?Zd(t):ie=e,na.current=null}function Zd(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tm(n,e),n!==null){n.flags&=32767,ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{le=6,ie=null;return}}else if(n=em(n,e,Ie),n!==null){ie=n;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=t}while(e!==null);le===0&&(le=5)}function Yt(t,e,n){var r=H,s=Be.transition;try{Be.transition=null,H=1,um(t,e,n,r)}finally{Be.transition=s,H=r}return null}function um(t,e,n,r){do Fn();while(At!==null);if(B&6)throw Error(S(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Hf(t,i),t===ce&&(ie=ce=null,he=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ys||(ys=!0,nh(Bs,function(){return Fn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Be.transition,Be.transition=null;var o=H;H=1;var l=B;B|=4,na.current=null,rm(t,n),Kd(n,t),Tp(Uo),Ws=!!Do,Uo=Do=null,t.current=n,sm(n),Af(),B=l,H=o,Be.transition=i}else t.current=n;if(ys&&(ys=!1,At=t,oi=s),i=t.pendingLanes,i===0&&(Ut=null),Mf(n.stateNode),Oe(t,re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ii)throw ii=!1,t=ol,ol=null,t;return oi&1&&t.tag!==0&&Fn(),i=t.pendingLanes,i&1?t===ll?Cr++:(Cr=0,ll=t):Cr=0,Kt(),null}function Fn(){if(At!==null){var t=Ic(oi),e=Be.transition,n=H;try{if(Be.transition=null,H=16>t?16:t,At===null)var r=!1;else{if(t=At,At=null,oi=0,B&6)throw Error(S(331));var s=B;for(B|=4,T=t.current;T!==null;){var i=T,o=i.child;if(T.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(T=u;T!==null;){var d=T;switch(d.tag){case 0:case 11:case 15:Er(8,d,i)}var h=d.child;if(h!==null)h.return=d,T=h;else for(;T!==null;){d=T;var m=d.sibling,y=d.return;if(Wd(d),d===u){T=null;break}if(m!==null){m.return=y,T=m;break}T=y}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}T=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,T=o;else e:for(;T!==null;){if(i=T,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Er(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,T=f;break e}T=i.return}}var p=t.current;for(T=p;T!==null;){o=T;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,T=g;else e:for(o=p;T!==null;){if(l=T,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_i(9,l)}}catch(j){te(l,l.return,j)}if(l===o){T=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,T=w;break e}T=l.return}}if(B=s,Kt(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(hi,t)}catch{}r=!0}return r}finally{H=n,Be.transition=e}}return!1}function bu(t,e,n){e=Gn(n,e),e=Id(t,e,1),t=Dt(t,e,1),e=Se(),t!==null&&(Jr(t,1,e),Oe(t,e))}function te(t,e,n){if(t.tag===3)bu(t,t,n);else for(;e!==null;){if(e.tag===3){bu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ut===null||!Ut.has(r))){t=Gn(n,t),t=Ad(e,t,1),e=Dt(e,t,1),t=Se(),e!==null&&(Jr(e,1,t),Oe(e,t));break}}e=e.return}}function cm(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Se(),t.pingedLanes|=t.suspendedLanes&n,ce===t&&(he&n)===n&&(le===4||le===3&&(he&130023424)===he&&500>re()-sa?rn(t,0):ra|=n),Oe(t,e)}function eh(t,e){e===0&&(t.mode&1?(e=as,as<<=1,!(as&130023424)&&(as=4194304)):e=1);var n=Se();t=_t(t,e),t!==null&&(Jr(t,e,n),Oe(t,n))}function dm(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eh(t,n)}function hm(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),eh(t,n)}var th;th=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pe.current)Te=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Te=!1,Zp(t,e,n);Te=!!(t.flags&131072)}else Te=!1,Q&&e.flags&1048576&&id(e,Ys,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$s(t,e),t=e.pendingProps;var s=Wn(e,we.current);Un(e,n),s=Yl(null,e,r,t,s,n);var i=Xl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Re(r)?(i=!0,Qs(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vl(e),s.updater=wi,e.stateNode=s,s._reactInternals=e,Qo(e,r,t,n),e=Xo(null,e,r,!0,i,n)):(e.tag=0,Q&&i&&Dl(e),ke(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($s(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pm(r),t=Je(r,t),s){case 0:e=Yo(null,e,r,t,n);break e;case 1:e=gu(null,e,r,t,n);break e;case 11:e=pu(null,e,r,t,n);break e;case 14:e=mu(null,e,r,Je(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Je(r,s),Yo(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Je(r,s),gu(t,e,r,s,n);case 3:e:{if(zd(e),t===null)throw Error(S(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dd(t,e),ei(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Gn(Error(S(423)),e),e=vu(t,e,r,n,s);break e}else if(r!==s){s=Gn(Error(S(424)),e),e=vu(t,e,r,n,s);break e}else for(Ae=zt(e.stateNode.containerInfo.firstChild),$e=e,Q=!0,Ze=null,n=ud(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qn(),r===s){e=xt(t,e,n);break e}ke(t,e,r,n)}e=e.child}return e;case 5:return hd(e),t===null&&Vo(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Fo(r,s)?o=null:i!==null&&Fo(r,i)&&(e.flags|=32),Md(t,e),ke(t,e,o,n),e.child;case 6:return t===null&&Vo(e),null;case 13:return Dd(t,e,n);case 4:return Kl(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vn(e,null,r,n):ke(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Je(r,s),pu(t,e,r,s,n);case 7:return ke(t,e,e.pendingProps,n),e.child;case 8:return ke(t,e,e.pendingProps.children,n),e.child;case 12:return ke(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,q(Xs,r._currentValue),r._currentValue=o,i!==null)if(nt(i.value,o)){if(i.children===s.children&&!Pe.current){e=xt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=vt(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Ko(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(S(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ko(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ke(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Un(e,n),s=We(s),r=r(s),e.flags|=1,ke(t,e,r,n),e.child;case 14:return r=e.type,s=Je(r,e.pendingProps),s=Je(r.type,s),mu(t,e,r,s,n);case 15:return $d(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Je(r,s),$s(t,e),e.tag=1,Re(r)?(t=!0,Qs(e)):t=!1,Un(e,n),Od(e,r,s),Qo(e,r,s,n),Xo(null,e,r,!0,t,n);case 19:return Ud(t,e,n);case 22:return Ld(t,e,n)}throw Error(S(156,e.tag))};function nh(t,e){return Tc(t,e)}function fm(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(t,e,n,r){return new fm(t,e,n,r)}function aa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pm(t){if(typeof t=="function")return aa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cl)return 11;if(t===Nl)return 14}return 2}function Bt(t,e){var n=t.alternate;return n===null?(n=Fe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zs(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")aa(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jn:return sn(n.children,s,i,e);case bl:o=8,s|=8;break;case wo:return t=Fe(12,n,e,s|2),t.elementType=wo,t.lanes=i,t;case _o:return t=Fe(13,n,e,s),t.elementType=_o,t.lanes=i,t;case xo:return t=Fe(19,n,e,s),t.elementType=xo,t.lanes=i,t;case hc:return ki(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cc:o=10;break e;case dc:o=9;break e;case Cl:o=11;break e;case Nl:o=14;break e;case Ct:o=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=Fe(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function sn(t,e,n,r){return t=Fe(7,t,r,e),t.lanes=n,t}function ki(t,e,n,r){return t=Fe(22,t,r,e),t.elementType=hc,t.lanes=n,t.stateNode={isHidden:!1},t}function lo(t,e,n){return t=Fe(6,t,null,e),t.lanes=n,t}function ao(t,e,n){return e=Fe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mm(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ua(t,e,n,r,s,i,o,l,a){return t=new mm(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fe(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vl(i),t}function gm(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rh(t){if(!t)return Wt;t=t._reactInternals;e:{if(hn(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Re(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(Re(n))return rd(t,n,e)}return e}function sh(t,e,n,r,s,i,o,l,a){return t=ua(n,r,!0,t,s,i,o,l,a),t.context=rh(null),n=t.current,r=Se(),s=Ft(n),i=vt(r,s),i.callback=e??null,Dt(n,i,s),t.current.lanes=s,Jr(t,s,r),Oe(t,r),t}function Si(t,e,n,r){var s=e.current,i=Se(),o=Ft(s);return n=rh(n),e.context===null?e.context=n:e.pendingContext=n,e=vt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dt(s,e,o),t!==null&&(tt(t,s,o,i),Os(t,s,o)),o}function ai(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ca(t,e){Cu(t,e),(t=t.alternate)&&Cu(t,e)}function vm(){return null}var ih=typeof reportError=="function"?reportError:function(t){console.error(t)};function da(t){this._internalRoot=t}ji.prototype.render=da.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));Si(t,e,null,null)};ji.prototype.unmount=da.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cn(function(){Si(null,t,null,null)}),e[wt]=null}};function ji(t){this._internalRoot=t}ji.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lc();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pt.length&&e!==0&&e<Pt[n].priority;n++);Pt.splice(n,0,t),n===0&&zc(t)}};function ha(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ei(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nu(){}function ym(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ai(o);i.call(u)}}var o=sh(e,r,t,0,null,!1,!1,"",Nu);return t._reactRootContainer=o,t[wt]=o.current,Dr(t.nodeType===8?t.parentNode:t),cn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ai(a);l.call(u)}}var a=ua(t,0,!1,null,null,!1,!1,"",Nu);return t._reactRootContainer=a,t[wt]=a.current,Dr(t.nodeType===8?t.parentNode:t),cn(function(){Si(e,a,n,r)}),a}function bi(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=ai(o);l.call(a)}}Si(e,o,t,s)}else o=ym(n,e,t,s,r);return ai(o)}Ac=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gr(e.pendingLanes);n!==0&&(Rl(e,n|1),Oe(e,re()),!(B&6)&&(Qn=re()+500,Kt()))}break;case 13:cn(function(){var r=_t(t,1);if(r!==null){var s=Se();tt(r,t,1,s)}}),ca(t,1)}};Ol=function(t){if(t.tag===13){var e=_t(t,134217728);if(e!==null){var n=Se();tt(e,t,134217728,n)}ca(t,134217728)}};$c=function(t){if(t.tag===13){var e=Ft(t),n=_t(t,e);if(n!==null){var r=Se();tt(n,t,e,r)}ca(t,e)}};Lc=function(){return H};Mc=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};Ro=function(t,e,n){switch(e){case"input":if(jo(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gi(r);if(!s)throw Error(S(90));pc(r),jo(r,s)}}}break;case"textarea":gc(t,n);break;case"select":e=n.value,e!=null&&Ln(t,!!n.multiple,e,!1)}};Sc=ia;jc=cn;var wm={usingClientEntryPoint:!1,Events:[Xr,Nn,gi,xc,kc,ia]},hr={findFiberByHostInstance:en,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_m={bundleType:hr.bundleType,version:hr.version,rendererPackageName:hr.rendererPackageName,rendererConfig:hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cc(t),t===null?null:t.stateNode},findFiberByHostInstance:hr.findFiberByHostInstance||vm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ws=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ws.isDisabled&&ws.supportsFiber)try{hi=ws.inject(_m),lt=ws}catch{}}Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wm;Me.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ha(e))throw Error(S(200));return gm(t,e,null,n)};Me.createRoot=function(t,e){if(!ha(t))throw Error(S(299));var n=!1,r="",s=ih;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ua(t,1,!1,null,null,n,!1,r,s),t[wt]=e.current,Dr(t.nodeType===8?t.parentNode:t),new da(e)};Me.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=Cc(e),t=t===null?null:t.stateNode,t};Me.flushSync=function(t){return cn(t)};Me.hydrate=function(t,e,n){if(!Ei(e))throw Error(S(200));return bi(null,t,e,!0,n)};Me.hydrateRoot=function(t,e,n){if(!ha(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ih;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sh(e,null,t,1,n??null,s,!1,i,o),t[wt]=e.current,Dr(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ji(e)};Me.render=function(t,e,n){if(!Ei(e))throw Error(S(200));return bi(null,t,e,!1,n)};Me.unmountComponentAtNode=function(t){if(!Ei(t))throw Error(S(40));return t._reactRootContainer?(cn(function(){bi(null,null,t,!1,function(){t._reactRootContainer=null,t[wt]=null})}),!0):!1};Me.unstable_batchedUpdates=ia;Me.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ei(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return bi(t,e,n,!1,r)};Me.version="18.3.1-next-f1338f8080-20240426";function oh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oh)}catch(t){console.error(t)}}oh(),oc.exports=Me;var xm=oc.exports,lh,Tu=xm;lh=Tu.createRoot,Tu.hydrateRoot;const _s=({rating:t,onRatingChange:e,label:n="Rating",readonly:r=!1})=>{const s=Array.from({length:11},(i,o)=>o);return c.jsxs("div",{className:"flex flex-col gap-2",children:[n&&c.jsx("label",{className:"text-amber-400 font-medium text-sm",children:n}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("select",{value:t===-1?"":t,onChange:i=>!r&&e(i.target.value===""?-1:Number(i.target.value)),disabled:r,className:"bg-gray-800 border border-gray-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200 min-w-[80px]",children:[c.jsx("option",{value:"",children:"Select"}),s.map(i=>c.jsx("option",{value:i,children:i},i))]}),c.jsx("span",{className:"text-gray-400 text-sm",children:t>=0?`${t}/10`:"Not rated"})]})]})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var km={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:a,...u},d)=>U.createElement("svg",{ref:d,...km,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Sm(t)}`,l].join(" "),...u},[...e.map(([h,m])=>U.createElement(h,m)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=J("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=J("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=J("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=J("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=J("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Um=({isOpen:t,onClose:e,trailerUrl:n,movieTitle:r})=>{if(!t)return null;const s=l=>{var a,u,d,h,m;if(l.includes("player.vimeo.com/video/")){const y=l.match(/player\.vimeo\.com\/video\/(\d+)/);if(y)return`https://player.vimeo.com/video/${y[1]}?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479&texttrack=en`}if(l.includes("vimeo.com/")&&!l.includes("player.vimeo.com")){const y=(a=l.split("vimeo.com/")[1])==null?void 0:a.split("?")[0];if(y)return`https://player.vimeo.com/video/${y}?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479&texttrack=en`}if(l.includes("drive.google.com/file/d/")){const y=(u=l.match(/\/file\/d\/([a-zA-Z0-9_-]+)/))==null?void 0:u[1];if(y)return`https://drive.google.com/file/d/${y}/preview?usp=sharing&cc_load_policy=1&hl=en&cc_lang_pref=en&autoplay=0`}if(l.includes("drive.google.com")&&l.includes("/preview")){let y=l.includes("usp=sharing")?l:`${l}${l.includes("?")?"&":"?"}usp=sharing`;return y.includes("cc_load_policy=1")||(y+="&cc_load_policy=1"),y.includes("hl=en")||(y+="&hl=en"),y.includes("cc_lang_pref=en")||(y+="&cc_lang_pref=en"),y.includes("autoplay=0")||(y+="&autoplay=0"),y}if(l.includes("drive.google.com/open?id=")){const y=(d=l.match(/id=([a-zA-Z0-9_-]+)/))==null?void 0:d[1];if(y)return`https://drive.google.com/file/d/${y}/preview?usp=sharing&cc_load_policy=1&hl=en&cc_lang_pref=en&autoplay=0`}return l.includes("youtube.com/embed/")?l.includes("cc_load_policy=1")?l:`${l}${l.includes("?")?"&":"?"}cc_load_policy=1&cc_lang_pref=en`:l.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${(h=l.split("v=")[1])==null?void 0:h.split("&")[0]}?cc_load_policy=1&cc_lang_pref=en`:l.includes("youtu.be/")?`https://www.youtube.com/embed/${(m=l.split("youtu.be/")[1])==null?void 0:m.split("?")[0]}?cc_load_policy=1&cc_lang_pref=en`:l},i=l=>l.includes("vimeo.com")||l.includes("player.vimeo.com"),o=l=>l.includes("drive.google.com");return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[c.jsxs("div",{className:"bg-gray-900 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[c.jsxs("h3",{className:"text-xl font-semibold text-white",children:[r," - Trailer"]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-800 rounded-lg",children:c.jsx(Dm,{size:24})})]}),c.jsx("div",{className:"aspect-video relative",children:c.jsx("iframe",{src:s(n),title:`${r} Trailer`,className:"absolute top-0 left-0 w-full h-full",frameBorder:"0",allow:i(n)?"autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share":o(n)?"autoplay; fullscreen; picture-in-picture":"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"})})]}),i(n)&&c.jsx("script",{src:"https://player.vimeo.com/api/player.js",async:!0})]})},Fm=({movie:t,rating:e,onRatingChange:n,showAdditionalQuestions:r=!1,diversityRating:s=-1,noveltyRating:i=-1,serendipityRating:o=-1,onDiversityChange:l,onNoveltyChange:a,onSerendipityChange:u,onTrailerStart:d,onTrailerEnd:h})=>{const[m,y]=U.useState(!1),[_,v]=U.useState(!1),k=()=>{d&&d(t.id),v(!0)},f=()=>{h&&h(t.id),v(!1)},p=()=>{y(!m)},g=t.description.length>160,w=g?t.description.substring(0,160)+"...":t.description;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-gray-900 rounded-xl overflow-hidden shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-105 border border-gray-800 flex flex-col h-full",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:t.poster,alt:t.title,className:"w-full h-80 object-contain bg-gray-800"}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center",children:c.jsx("button",{onClick:k,className:"opacity-0 group-hover:opacity-100 bg-amber-500 hover:bg-amber-600 text-black p-4 rounded-full transition-all duration-300 transform scale-0 group-hover:scale-100",children:c.jsx(Am,{size:24})})})]}),c.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-3 text-sm text-gray-400",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(bm,{size:16}),c.jsx("span",{children:t.year})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(dh,{size:16}),c.jsx("span",{children:t.director})]}),c.jsx("span",{className:"bg-amber-500 text-black px-3 py-1 rounded text-xs font-medium",children:t.genre})]}),c.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:t.title}),c.jsxs("div",{className:"mb-4 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[c.jsx(zm,{size:16,className:"text-amber-400"}),c.jsx("span",{className:"text-amber-400 font-medium text-sm",children:"Cast"})]}),c.jsx("p",{className:"text-gray-300 text-sm",children:t.actors})]}),c.jsxs("div",{className:"mb-6 flex-grow",children:[c.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[c.jsx(Tm,{size:14,className:"text-white"}),c.jsx("span",{className:"text-white font-medium text-sm",children:"Description"})]}),c.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:m?t.description:w}),g&&c.jsx("button",{onClick:p,className:"flex items-center gap-1 mt-2 text-amber-400 hover:text-amber-300 text-sm font-medium transition-colors duration-200",children:m?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"See Less"}),c.jsx(Nm,{size:16})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"See More"}),c.jsx(Cm,{size:16})]})})]}),c.jsxs("div",{className:"space-y-4 flex-shrink-0",children:[c.jsx(_s,{rating:e,onRatingChange:n,label:r?"* Your Rating":"Your Rating"}),r&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-amber-400 font-medium text-sm",children:"* How diverse is this movie? (0 = not diverse, 10 = very diverse)"}),c.jsxs("div",{className:"relative group",children:[c.jsx(uo,{size:16,className:"text-gray-400 hover:text-amber-400 cursor-help"}),c.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-gray-800 border border-gray-600 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none w-64 z-50 shadow-xl",children:"How different is this recommended movie from other movies in this list?"})]})]}),c.jsx(_s,{rating:s,onRatingChange:l,label:""})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-amber-400 font-medium text-sm",children:"* How novel is this movie? (0 = not novel, 10 = very novel)"}),c.jsxs("div",{className:"relative group",children:[c.jsx(uo,{size:16,className:"text-gray-400 hover:text-amber-400 cursor-help"}),c.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-gray-800 border border-gray-600 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none w-64 z-50 shadow-xl",children:"How new, fresh, or unfamiliar is this movie to you?"})]})]}),c.jsx(_s,{rating:i,onRatingChange:a,label:""})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-amber-400 font-medium text-sm",children:"* How serendipitous is this movie? (0 = not serendipitous, 10 = very serendipitous)"}),c.jsxs("div",{className:"relative group",children:[c.jsx(uo,{size:16,className:"text-gray-400 hover:text-amber-400 cursor-help"}),c.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-gray-800 border border-gray-600 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none w-64 z-50 shadow-xl",children:"How surprising or unexpected is this recommended movie for you?"})]})]}),c.jsx(_s,{rating:o,onRatingChange:u,label:""})]})]})})]})]})]}),c.jsx(Um,{isOpen:_,onClose:f,trailerUrl:t.trailer,movieTitle:t.title})]})},Bm=({current:t,total:e,minimum:n,label:r})=>{const s=t/e*100,i=n?n/e*100:0;return c.jsxs("div",{className:"w-full mb-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-amber-400 font-medium",children:r}),r.includes("Initial")&&c.jsx("span",{className:"text-gray-400 text-sm italic",children:"💡 Rate more movies to get more accurate recommendations!"})]}),c.jsxs("span",{className:"text-white",children:[t,"/",e,n&&t<n&&c.jsxs("span",{className:"text-amber-500 ml-2",children:["(minimum ",n,")"]})]})]}),c.jsxs("div",{className:"w-full bg-gray-800 rounded-full h-3 overflow-hidden relative",children:[c.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-amber-600 transition-all duration-500 ease-out",style:{width:`${Math.min(s,100)}%`}}),n&&c.jsx("div",{className:"absolute top-0 w-0.5 h-full bg-red-500 z-10",style:{left:`${i}%`}})]})]})},Hm=({ratingsCount:t,onGetRecommendations:e,onRateMore:n})=>c.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-8",children:c.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-amber-500 rounded-full mb-6",children:c.jsx(fa,{size:40,className:"text-black"})}),c.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Great Progress!"}),c.jsxs("p",{className:"text-xl text-gray-300 mb-8",children:["You've rated ",t," movies. What would you like to do next?"]})]}),c.jsxs("div",{className:"bg-amber-500 bg-opacity-10 border border-amber-500 rounded-lg p-6 mb-8",children:[c.jsxs("div",{className:"flex items-center justify-center mb-4",children:[c.jsx(Rm,{className:"text-amber-400 mr-2",size:24}),c.jsx("span",{className:"text-amber-400 font-semibold",children:"Pro Tip"})]}),c.jsx("p",{className:"text-white text-lg",children:"The more movies you rate, the more accurate your recommendations will be!"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("button",{onClick:e,className:"bg-amber-500 hover:bg-amber-600 text-black font-semibold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[c.jsx("div",{className:"text-xl mb-2",children:"Get Recommendations"}),c.jsx("div",{className:"text-sm opacity-90",children:"See movies picked just for you"})]}),c.jsxs("button",{onClick:n,className:"bg-gray-800 hover:bg-gray-700 text-white font-semibold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl border border-gray-600",children:[c.jsx("div",{className:"text-xl mb-2",children:"Rate More Movies"}),c.jsx("div",{className:"text-sm opacity-70",children:"Improve recommendation accuracy"})]})]})]})}),Wm=({totalRatings:t,averageRating:e})=>c.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-8",children:c.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-amber-500 rounded-full mb-6",children:c.jsx(Mm,{size:48,className:"text-black"})}),c.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Congratulations!"}),c.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"You've successfully completed the movie rating study!"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[c.jsxs("div",{className:"flex items-center justify-center mb-4",children:[c.jsx(fa,{className:"text-amber-400 mr-2",size:24}),c.jsx("span",{className:"text-amber-400 font-semibold",children:"Total Ratings"})]}),c.jsx("div",{className:"text-3xl font-bold text-white",children:t})]}),c.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[c.jsxs("div",{className:"flex items-center justify-center mb-4",children:[c.jsx(Em,{className:"text-amber-400 mr-2",size:24}),c.jsx("span",{className:"text-amber-400 font-semibold",children:"Average Rating"})]}),c.jsxs("div",{className:"text-3xl font-bold text-white",children:[e.toFixed(1),"/10"]})]})]}),c.jsxs("div",{className:"bg-amber-500 bg-opacity-10 border border-amber-500 rounded-lg p-8",children:[c.jsxs("div",{className:"flex items-center justify-center mb-4",children:[c.jsx(Pm,{className:"text-amber-400 mr-2",size:24}),c.jsx("span",{className:"text-amber-400 font-semibold text-lg",children:"Thank You!"})]}),c.jsx("p",{className:"text-white text-lg text-center leading-relaxed",children:"Thank you for participating in our study! You can now close the window."})]})]})}),qm=({onStart:t})=>c.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-amber-500 rounded-full mb-6",children:c.jsx(ch,{size:48,className:"text-black"})}),c.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"Welcome to CineRate"}),c.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-3xl mx-auto",children:"Please follow the steps below to help us understand your movie preferences."}),c.jsxs("div",{className:"bg-amber-500 bg-opacity-10 border border-amber-500 rounded-xl p-6 mb-8 max-w-3xl mx-auto",children:[c.jsx("h3",{className:"text-amber-400 font-semibold text-lg mb-3",children:"Important Notice"}),c.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Providing more frequent and accurate ratings will lead to more precise recommendations. Upon completion of this study, we will conduct a lottery in which the winner will receive a video-on-demand (VOD) rental of their highest-rated recommended movie as a reward."})]})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:[c.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800",children:[c.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-amber-500 bg-opacity-20 rounded-full mb-4 mx-auto",children:c.jsx(fa,{className:"text-amber-400",size:32})}),c.jsxs("h3",{className:"text-xl font-semibold text-white mb-3",children:["Step 1.",c.jsx("br",{})," Rate Movies"]}),c.jsx("p",{className:"text-gray-400",children:"Start by rating movies to help us understand your taste preferences. You can watch the trailer by clicking on the poster."})]}),c.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800",children:[c.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-amber-500 bg-opacity-20 rounded-full mb-4 mx-auto",children:c.jsx(Lm,{className:"text-amber-400",size:32})}),c.jsxs("h3",{className:"text-xl font-semibold text-white mb-3",children:["Step 2.",c.jsx("br",{})," Get Recommendations"]}),c.jsx("p",{className:"text-gray-400",children:"Receive personalized movie recommendations based on your ratings and preferences."})]}),c.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800",children:[c.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-amber-500 bg-opacity-20 rounded-full mb-4 mx-auto",children:c.jsx(jm,{className:"text-amber-400",size:32})}),c.jsxs("h3",{className:"text-xl font-semibold text-white mb-3",children:["Step 3.",c.jsx("br",{})," Evaluate Quality"]}),c.jsx("p",{className:"text-gray-400",children:"Rate the recommended movies, as well as the diversity, novelty, and serendipity of our recommendations."})]})]}),c.jsxs("div",{className:"bg-amber-500 bg-opacity-10 border border-amber-500 rounded-xl p-8 mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"How It Works"}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-left",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-amber-400 font-semibold mb-2",children:"Phase 1: Initial Ratings"}),c.jsx("p",{className:"text-gray-300 text-sm",children:"Rate movies from our curated collection. You'll need to rate a minimum number of movies to proceed, but rating more movies improves recommendation accuracy."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-amber-400 font-semibold mb-2",children:"Phase 2: Personalized Recommendations"}),c.jsx("p",{className:"text-gray-300 text-sm",children:"Based on your ratings, we'll show you personalized recommendations. Rate all of these movies and answer additional questions about diversity, novelty, and serendipity."})]})]})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("button",{onClick:t,className:"bg-amber-500 hover:bg-amber-600 text-black font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl inline-flex items-center gap-3 text-lg",children:["Start Rating Movies",c.jsx(ah,{size:24})]}),c.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"This study takes approximately 30 minutes to complete"})]})]})}),Vm=({isOpen:t,onModifyRatings:e,onFinish:n})=>t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"bg-gray-900 rounded-xl max-w-md w-full p-8 border border-gray-800",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500 rounded-full mb-6",children:c.jsx(uh,{size:32,className:"text-white"})}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Phase 2 Complete!"}),c.jsx("p",{className:"text-gray-300 mb-8",children:"You have successfully rated all recommended movies and answered the additional questions. You can now finish the study or modify your ratings if needed."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:e,className:"w-full bg-gray-800 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 border border-gray-600 flex items-center justify-center gap-2",children:[c.jsx($m,{size:20}),"Modify Ratings"]}),c.jsxs("button",{onClick:n,className:"w-full bg-amber-500 hover:bg-amber-600 text-black font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2",children:["Finish Study",c.jsx(ah,{size:20})]})]})]})})}):null,Km=({onComplete:t})=>{const[e,n]=U.useState({movieWatchingFrequency:"",streamingServices:[],primaryStreamingService:"",movieGenrePreferences:[],opennessToExperience:"",riskAversion:"",movieExpertise:"",attentionCheck:"",serendipityAttitude:"",noveltyAttitude:"",diversityAttitude:"",noveltyAttitude2:"",diversityAttitude2:"",serendipityAttitude2:"",gender:"",ageRange:"",nationality:"",occupation:"",additionalComments:"",email:""}),[r,s]=U.useState([]),i=["0-1","2-3","4-6","7-10","More than 10"],o=["Action","Adventure","Animation","Comedy","Drama","Horror","Romance","Science Fiction"],l=["18-24","25-34","35-44","45-54","55-64","65 or older"],a=["1","2","3","4","5","6","7"],u=["1","2","3","4","5","6","7"],d=["1","2","3","4","5","6","7"],h=["1","2","3","4","5","6","7"],m=(v,k)=>{n(f=>({...f,movieGenrePreferences:k?[v]:[]}))},y=()=>{const v=[];return e.movieWatchingFrequency||v.push("Movie watching frequency is required"),e.movieGenrePreferences.length===0&&v.push("At least one movie genre preference is required"),e.opennessToExperience||v.push("Openness to experience question is required"),e.riskAversion||v.push("Risk aversion question is required"),e.movieExpertise||v.push("Movie expertise question is required"),e.serendipityAttitude||v.push("Serendipity attitude question is required"),e.noveltyAttitude||v.push("Novelty attitude question is required"),e.diversityAttitude||v.push("Diversity attitude question is required"),e.noveltyAttitude2||v.push("Second novelty attitude question is required"),e.diversityAttitude2||v.push("Second diversity attitude question is required"),e.serendipityAttitude2||v.push("Second serendipity attitude question is required"),e.attentionCheck||v.push("Please answer the attention check question"),s(v),v.length===0},_=v=>{v.preventDefault(),y()&&t(e)};return c.jsx("div",{className:"min-h-screen bg-gray-950 py-8 px-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-amber-500 rounded-full mb-4",children:c.jsx(uh,{size:32,className:"text-black"})}),c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Final Questionnaire"}),c.jsx("p",{className:"text-gray-300",children:"Please answer a few questions about your movie preferences and background"})]}),r.length>0&&c.jsxs("div",{className:"bg-red-900 border border-red-500 rounded-lg p-4 mb-6",children:[c.jsx("h3",{className:"text-red-400 font-semibold mb-2",children:"Please complete the following required fields:"}),c.jsx("ul",{className:"text-red-300 text-sm space-y-1",children:r.map((v,k)=>c.jsxs("li",{children:["• ",v]},k))})]}),c.jsxs("form",{onSubmit:_,className:"space-y-8",children:[c.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800",children:[c.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Required Information"}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"How many movies do you watch per month? *"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.map(v=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"movieFrequency",value:v,checked:e.movieWatchingFrequency===v,onChange:k=>n(f=>({...f,movieWatchingFrequency:k.target.value})),className:"mr-3 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"What is your most favorite movie genre? (Select one) *"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o.map(v=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"movieGenre",value:v,checked:e.movieGenrePreferences.includes(v),onChange:k=>m(v,k.target.checked),className:"mr-3 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"How knowledgeable are you about movies in general? (1-Not at all knowledgeable, 7-Extremely knowledgeable) *"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:d.map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"movieExpertise",value:v,checked:e.movieExpertise===v,onChange:k=>n(f=>({...f,movieExpertise:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:'To help us with the survey, please select "4" for this question. *'}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:["1","2","3","4","5","6","7"].map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"attentionCheck",value:v,checked:e.attentionCheck===v,onChange:k=>n(f=>({...f,attentionCheck:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"I often prefer watching similar movies. (1-Strongly disagree, 7-Strongly agree) *"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:a.map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"diversityAttitude",value:v,checked:e.diversityAttitude===v,onChange:k=>n(f=>({...f,diversityAttitude:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"Compared to my peers, I watch more diverse movies. (1-Strongly disagree, 7-Strongly agree) *"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"diversityAttitude2",value:v,checked:e.diversityAttitude2===v,onChange:k=>n(f=>({...f,diversityAttitude2:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"I often prefer watching novel movies. (1-Strongly disagree, 7-Strongly agree) *"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"noveltyAttitude",value:v,checked:e.noveltyAttitude===v,onChange:k=>n(f=>({...f,noveltyAttitude:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"Compared to my peers, I often watch conventional movies. (1-Strongly disagree, 7-Strongly agree) *"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"noveltyAttitude2",value:v,checked:e.noveltyAttitude2===v,onChange:k=>n(f=>({...f,noveltyAttitude2:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"I often prefer watching unexpected movies. (1-Strongly disagree, 7-Strongly agree) *"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"diversityAttitude",value:v,checked:e.serendipityAttitude===v,onChange:k=>n(f=>({...f,serendipityAttitude:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"Compared to my peers, I often watch movies that are easier to discover. (1-Strongly disagree, 7-Strongly agree) *"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.map(v=>c.jsxs("label",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"radio",name:"serendipityAttitude2",value:v,checked:e.serendipityAttitude2===v,onChange:k=>n(f=>({...f,serendipityAttitude2:k.target.value})),className:"mb-1 text-amber-500 focus:ring-amber-500"}),c.jsx("span",{className:"text-gray-300 text-sm",children:v})]},v))})]})]}),c.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800",children:[c.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[c.jsx(dh,{className:"mr-2",size:24}),"Optional Information"]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"Gender (Optional)"}),c.jsxs("select",{value:e.gender||"",onChange:v=>n(k=>({...k,gender:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[c.jsx("option",{value:"",children:"Select"}),c.jsx("option",{value:"Male",children:"Male"}),c.jsx("option",{value:"Female",children:"Female"}),c.jsx("option",{value:"Non-binary",children:"Non-binary"}),c.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"}),c.jsx("option",{value:"Other",children:"Other"})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-amber-400 font-medium mb-3",children:"Age Range (Optional)"}),c.jsxs("select",{value:e.ageRange||"",onChange:v=>n(k=>({...k,ageRange:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[c.jsx("option",{value:"",children:"Select age range"}),l.map(v=>c.jsx("option",{value:v,children:v},v))]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("label",{className:"block text-amber-400 font-medium mb-3 flex items-center",children:[c.jsx(Om,{className:"mr-2",size:20}),"Email Address for Lottery Participation (Optional)"]}),c.jsx("input",{type:"email",value:e.email||"",onChange:v=>n(k=>({...k,email:v.target.value})),placeholder:"Enter your email address to participate in the lottery",className:"w-full bg-gray-800 border border-gray-600 text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-amber-500"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"If you provide your email, you'll be eligible for the lottery to win a video-on-demand (VOD) rental of your highest-rated recommended movie."})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("label",{className:"block text-amber-400 font-medium mb-3 flex items-center",children:[c.jsx(Im,{className:"mr-2",size:20}),"Additional Comments (Optional)"]}),c.jsx("textarea",{value:e.additionalComments||"",onChange:v=>n(k=>({...k,additionalComments:v.target.value})),placeholder:"Any additional thoughts about the study or your movie preferences...",rows:4,className:"w-full bg-gray-800 border border-gray-600 text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-amber-500 resize-vertical"})]})]}),c.jsx("div",{className:"text-center",children:c.jsx("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-black font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg text-lg",children:"Complete Study"})})]})]})})},Et="https://recs-api-467031344420.us-central1.run.app";class $n{static getInstance(){return $n.instance||($n.instance=new $n),$n.instance}async generateRecommendations(e){try{console.log("Calling recommendation API for session:",e),console.log("API URL:",Et),console.log("Full API endpoint:",`${Et}/recommend`);const n={session_id:e,topk_per_model:10,phase:2};console.log("Request body:",JSON.stringify(n,null,2));const r=await fetch(`${Et}/recommend`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(3e4)});if(console.log("Response status:",r.status),console.log("Response headers:",Object.fromEntries(r.headers.entries())),!r.ok){const i=await r.text();return console.error("Recommendation API error:",{status:r.status,statusText:r.statusText,errorText:i,url:`${Et}/recommend`}),null}const s=await r.json();return console.log("Recommendation API response:",s),s}catch(n){return n.name==="AbortError"?console.error("Recommendation API request timed out after 30 seconds"):n.name==="TypeError"&&n.message.includes("fetch")?(console.error("Network error - cannot reach recommendation API:",n.message),console.error("Check if the API URL is correct and the service is running")):console.error("Error calling recommendation API:",n),null}}async checkHealth(){try{console.log("Checking API health at:",`${Et}/health`);const e=await fetch(`${Et}/health`,{method:"GET",signal:AbortSignal.timeout(1e4)}),n=e.ok;if(n){const r=await e.json();console.log("Health check successful:",r)}else{const r=await e.text();console.error("Health check failed:",{status:e.status,statusText:e.statusText,errorText:r})}return n}catch(e){return e.name==="AbortError"?console.error("Health check timed out after 10 seconds"):e.name==="TypeError"&&e.message.includes("fetch")?console.error("Network error during health check - cannot reach API:",e.message):console.error("Health check failed:",e),!1}}}const Ou=$n.getInstance(),Gm="modulepreload",Qm=function(t){return"/"+t},Iu={},es=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=Qm(a),a in Iu)return;Iu[a]=!0;const u=a.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Gm,u||(h.as="script"),h.crossOrigin="",h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Jm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class pa extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Ym extends pa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xm extends pa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zm extends pa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(cl||(cl={}));var eg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class tg{constructor(e,{headers:n={},customFetch:r,region:s=cl.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Jm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return eg(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:a}=n;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(_=>{throw new Ym(_)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Xm(d);if(!d.ok)throw new Zm(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield d.json():m==="application/octet-stream"?y=yield d.blob():m==="text/event-stream"?y=d:m==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var Ne={},ma={},Ci={},ts={},Ni={},Ti={},ng=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jn=ng();const rg=Jn.fetch,hh=Jn.fetch.bind(Jn),fh=Jn.Headers,sg=Jn.Request,ig=Jn.Response,er=Object.freeze(Object.defineProperty({__proto__:null,Headers:fh,Request:sg,Response:ig,default:hh,fetch:rg},Symbol.toStringTag,{value:"Module"})),og=Gh(er);var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});let lg=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Pi.default=lg;var ph=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ti,"__esModule",{value:!0});const ag=ph(og),ug=ph(Pi);let cg=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ag.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let u=null,d=null,h=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const f=await i.text();f===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=f:d=JSON.parse(f))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,y="OK")}catch{i.status===404&&v===""?(m=204,y="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((a=u==null?void 0:u.details)===null||a===void 0)&&a.includes("0 rows"))&&(u=null,m=200,y="OK"),u&&this.shouldThrowOnError)throw new ug.default(u)}return{error:u,data:d,count:h,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Ti.default=cg;var dg=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ni,"__esModule",{value:!0});const hg=dg(Ti);let fg=class extends hg.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ni.default=fg;var pg=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ts,"__esModule",{value:!0});const mg=pg(Ni);let gg=class extends mg.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ts.default=gg;var vg=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ci,"__esModule",{value:!0});const fr=vg(ts);let yg=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(a.length>0){const u=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new fr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new fr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new fr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ci.default=yg;var Ri={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.version=void 0;Oi.version="0.0.0-automated";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.DEFAULT_HEADERS=void 0;const wg=Oi;Ri.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wg.version}`};var mh=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ma,"__esModule",{value:!0});const _g=mh(Ci),xg=mh(ts),kg=Ri;let Sg=class gh{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},kg.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new _g.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",a=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new xg.default({method:o,url:l,headers:u,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};ma.default=Sg;var tr=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.PostgrestError=Ne.PostgrestBuilder=Ne.PostgrestTransformBuilder=Ne.PostgrestFilterBuilder=Ne.PostgrestQueryBuilder=Ne.PostgrestClient=void 0;const vh=tr(ma);Ne.PostgrestClient=vh.default;const yh=tr(Ci);Ne.PostgrestQueryBuilder=yh.default;const wh=tr(ts);Ne.PostgrestFilterBuilder=wh.default;const _h=tr(Ni);Ne.PostgrestTransformBuilder=_h.default;const xh=tr(Ti);Ne.PostgrestBuilder=xh.default;const kh=tr(Pi);Ne.PostgrestError=kh.default;var jg=Ne.default={PostgrestClient:vh.default,PostgrestQueryBuilder:yh.default,PostgrestFilterBuilder:wh.default,PostgrestTransformBuilder:_h.default,PostgrestBuilder:xh.default,PostgrestError:kh.default};const{PostgrestClient:Eg,PostgrestQueryBuilder:S0,PostgrestFilterBuilder:j0,PostgrestTransformBuilder:E0,PostgrestBuilder:b0,PostgrestError:C0}=jg;let dl;typeof window>"u"?dl=require("ws"):dl=window.WebSocket;const bg=dl,Cg="2.11.10",Ng={"X-Client-Info":`realtime-js/${Cg}`},Tg="1.0.0",Sh=1e4,Pg=1e3;var Bn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Bn||(Bn={}));var xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xe||(xe={}));var Xe;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xe||(Xe={}));var hl;(function(t){t.websocket="websocket"})(hl||(hl={}));var Zt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zt||(Zt={}));class Rg{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const a=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class jh{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(W||(W={}));const Au=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Og(o,t,e,s),i),{})},Og=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Eh(i,o):fl(o)},Eh=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Lg(e,n)}switch(t){case W.bool:return Ig(e);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return Ag(e);case W.json:case W.jsonb:return $g(e);case W.timestamp:return Mg(e);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return fl(e);default:return fl(e)}},fl=t=>t,Ig=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ag=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},$g=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Lg=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Eh(e,l))}return t},Mg=t=>typeof t=="string"?t.replace(" ","T"):t,bh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class co{constructor(e,n,r={},s=Sh){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $u;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})($u||($u={}));class Nr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=Nr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Nr.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},a={};return this.map(i,(u,d)=>{o[u]||(a[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(k=>k.presence_ref),y=h.map(k=>k.presence_ref),_=d.filter(k=>y.indexOf(k.presence_ref)<0),v=h.filter(k=>m.indexOf(k.presence_ref)<0);_.length>0&&(l[u]=_),v.length>0&&(a[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:a},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),d.length>0){const h=e[l].map(y=>y.presence_ref),m=d.filter(y=>h.indexOf(y.presence_ref)<0);e[l].unshift(...m)}r(l,d,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const d=a.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,a),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Lu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Lu||(Lu={}));var Mu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Mu||(Mu={}));var ft;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ft||(ft={}));class ga{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new co(this,Xe.join,this.params,this.timeout),this.rejoinTimer=new jh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xe.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Nr(this),this.broadcastEndpointURL=bh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(ft.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ft.CLOSED));const a={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(ft.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,_=[];for(let v=0;v<y;v++){const k=m[v],{filter:{event:f,schema:p,table:g,filter:w}}=k,j=d&&d[v];if(j&&j.event===f&&j.schema===p&&j.table===g&&j.filter===w)_.push(Object.assign(Object.assign({},k),{id:j.id}));else{this.unsubscribe(),this.state=xe.errored,e==null||e(ft.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(ft.SUBSCRIBED);return}}).receive("error",d=>{this.state=xe.errored,e==null||e(ft.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ft.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xe.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new co(this,Xe.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new co(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:d}=Xe;if(r&&[l,a,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var _,v,k;return((_=y.filter)===null||_===void 0?void 0:_.event)==="*"||((k=(v=y.filter)===null||v===void 0?void 0:v.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(y=>y.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var _,v,k,f,p,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const w=y.id,j=(_=y.filter)===null||_===void 0?void 0:_.event;return w&&((v=n.ids)===null||v===void 0?void 0:v.includes(w))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const w=(p=(f=y==null?void 0:y.filter)===null||f===void 0?void 0:f.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return w==="*"||w===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const _=m.data,{schema:v,table:k,commit_timestamp:f,type:p,errors:g}=_;m=Object.assign(Object.assign({},{schema:v,table:k,commit_timestamp:f,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(_))}y.callback(m,r)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ga.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xe.close,{},e)}_onError(e){this._on(Xe.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Au(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Au(e.columns,e.old_record)),n}}const zu=()=>{},zg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dg{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Ng,this.params={},this.timeout=Sh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zu,this.ref=0,this.logger=zu,this.conn=null,this.sendBuffer=[],this.serializer=new Rg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>es(async()=>{const{default:a}=await Promise.resolve().then(()=>er);return{default:a}},void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${hl.websocket}`,this.httpEndpoint=bh(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bg),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Ug(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tg}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bn.connecting:return Zt.Connecting;case Bn.open:return Zt.Open;case Bn.closing:return Zt.Closing;default:return Zt.Closed}}isConnected(){return this.connectionState()===Zt.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ga(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Xe.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Pg,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xe.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([zg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Ug{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Bn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class va extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ae(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Fg extends va{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pl extends va{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Bg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const Ch=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Hg=()=>Bg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield es(()=>Promise.resolve().then(()=>er),void 0)).Response:Response}),ml=t=>{if(Array.isArray(t))return t.map(n=>ml(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ml(r)}),e};var fn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const ho=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Wg=(t,e,n)=>fn(void 0,void 0,void 0,function*(){const r=yield Hg();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Fg(ho(s),t.status||500))}).catch(s=>{e(new pl(ho(s),s))}):e(new pl(ho(t),t))}),qg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ns(t,e,n,r,s,i){return fn(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,qg(e,r,s,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Wg(a,l,r))})})}function ui(t,e,n,r){return fn(this,void 0,void 0,function*(){return ns(t,"GET",e,n,r)})}function Tt(t,e,n,r,s){return fn(this,void 0,void 0,function*(){return ns(t,"POST",e,r,s,n)})}function Vg(t,e,n,r,s){return fn(this,void 0,void 0,function*(){return ns(t,"PUT",e,r,s,n)})}function Kg(t,e,n,r){return fn(this,void 0,void 0,function*(){return ns(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Nh(t,e,n,r,s){return fn(this,void 0,void 0,function*(){return ns(t,"DELETE",e,r,s,n)})}var be=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const Gg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Du={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qg{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Ch(s)}uploadOrUpdate(e,n,r,s){return be(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Du),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(ae(i))return{data:null,error:i};throw i}})}upload(e,n,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return be(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let a;const u=Object.assign({upsert:Du.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl)):(a=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(ae(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,n){return be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Tt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new va("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}update(e,n,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return be(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}copy(e,n,r){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield Tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return be(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Tt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return be(this,void 0,void 0,function*(){try{const s=yield Tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}download(e,n){return be(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ui(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ae(l))return{data:null,error:l};throw l}})}info(e){return be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ui(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ml(r),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}exists(e){return be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Kg(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ae(r)&&r instanceof pl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&s.push(a);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return be(this,void 0,void 0,function*(){try{return{data:yield Nh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}})}list(e,n,r){return be(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Gg),n),{prefix:e||""});return{data:yield Tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Jg="2.7.1",Yg={"X-Client-Info":`storage-js/${Jg}`};var yn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class Xg{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Yg),n),this.fetch=Ch(r)}listBuckets(){return yn(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ae(e))return{data:null,error:e};throw e}})}getBucket(e){return yn(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return yn(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return yn(this,void 0,void 0,function*(){try{return{data:yield Vg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}emptyBucket(e){return yn(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}})}deleteBucket(e){return yn(this,void 0,void 0,function*(){try{return{data:yield Nh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}})}}class Zg extends Xg{constructor(e,n={},r){super(e,n,r)}from(e){return new Qg(this.url,this.headers,e,this.fetch)}}const ev="2.50.0";let yr="";typeof Deno<"u"?yr="deno":typeof document<"u"?yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yr="react-native":yr="node";const tv={"X-Client-Info":`supabase-js-${yr}/${ev}`},nv={headers:tv},rv={schema:"public"},sv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iv={};var ov=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const lv=t=>{let e;return t?e=t:typeof fetch>"u"?e=hh:e=fetch,(...n)=>e(...n)},av=()=>typeof Headers>"u"?fh:Headers,uv=(t,e,n)=>{const r=lv(n),s=av();return(i,o)=>ov(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var cv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};function dv(t){return t.endsWith("/")?t:t+"/"}function hv(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:a,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>cv(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const Th="2.70.0",kn=30*1e3,gl=3,fo=gl*kn,fv="http://localhost:9999",pv="supabase.auth.token",mv={"X-Client-Info":`gotrue-js/${Th}`},vl="X-Supabase-Api-Version",Ph={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vv=6e5;class ya extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function L(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yv extends ya{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function wv(t){return L(t)&&t.name==="AuthApiError"}class Rh extends ya{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Gt extends ya{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class bt extends Gt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _v(t){return L(t)&&t.name==="AuthSessionMissingError"}class xs extends Gt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ks extends Gt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ss extends Gt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xv(t){return L(t)&&t.name==="AuthImplicitGrantRedirectError"}class Uu extends Gt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yl extends Gt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function po(t){return L(t)&&t.name==="AuthRetryableFetchError"}class Fu extends Gt{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Tr extends Gt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bu=` 	
\r=`.split(""),kv=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Bu.length;e+=1)t[Bu[e].charCodeAt(0)]=-2;for(let e=0;e<ci.length;e+=1)t[ci[e].charCodeAt(0)]=e;return t})();function Hu(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ci[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ci[r]),e.queuedBits-=6}}function Oh(t,e,n){const r=kv[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Wu(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Ev(o,r,n)};for(let o=0;o<t.length;o+=1)Oh(t.charCodeAt(o),s,i);return e.join("")}function Sv(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function jv(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Sv(r,e)}}function Ev(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function bv(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Oh(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Cv(t){const e=[];return jv(t,n=>e.push(n)),new Uint8Array(e)}function Nv(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Hu(s,n,r)),Hu(null,n,r),e.join("")}function Tv(t){return Math.round(Date.now()/1e3)+t}function Pv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qe=()=>typeof window<"u"&&typeof document<"u",Qt={tested:!1,writable:!1},Pr=()=>{if(!Qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qt.tested)return Qt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Qt.tested=!0,Qt.writable=!0}catch{Qt.tested=!0,Qt.writable=!1}return Qt.writable};function Rv(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Ih=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ov=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ah=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},js=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Es=async(t,e)=>{await t.removeItem(e)};class Ii{constructor(){this.promise=new Ii.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ii.promiseConstructor=Promise;function mo(t){const e=t.split(".");if(e.length!==3)throw new Tr("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!gv.test(e[r]))throw new Tr("JWT not in base64url format");return{header:JSON.parse(Wu(e[0])),payload:JSON.parse(Wu(e[1])),signature:bv(e[2]),raw:{header:e[0],payload:e[1]}}}async function Iv(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Av(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function $v(t){return("0"+t.toString(16)).substr(-2)}function Lv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,$v).join("")}async function Mv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function zv(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Mv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wn(t,e,n=!1){const r=Lv();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ah(t,`${e}-code-verifier`,s);const i=await zv(r);return[i,r===i?"plain":"s256"]}const Dv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Uv(t){const e=t.headers.get(vl);if(!e||!e.match(Dv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Fv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Bv(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _n(t){if(!Hv.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Wv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Xt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qv=[502,503,504];async function qu(t){var e;if(!Ov(t))throw new yl(Xt(t),0);if(qv.includes(t.status))throw new yl(Xt(t),t.status);let n;try{n=await t.json()}catch(i){throw new Rh(Xt(i),i)}let r;const s=Uv(t);if(s&&s.getTime()>=Ph["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Fu(Xt(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new bt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Fu(Xt(n),t.status,n.weak_password.reasons);throw new yv(Xt(n),t.status||500,r)}const Vv=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function D(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[vl]||(i[vl]=Ph["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Kv(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function Kv(t,e,n,r,s,i){const o=Vv(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(a){throw console.error(a),new yl(Xt(a),0)}if(l.ok||await qu(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await qu(a)}}function dt(t){var e;let n=null;Yv(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Tv(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Vu(t){const e=dt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ot(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Gv(t){return{data:t,error:null}}function Qv(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Wv(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Jv(t){return t}function Yv(t){return t.access_token&&t.refresh_token&&t.expires_in}const go=["global","local","others"];var Xv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Zv{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Ih(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=go[0]){if(go.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${go.join(", ")}`);try{return await D(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await D(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ot})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Xv(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await D(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Qv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(L(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await D(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ot})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,a;try{const u={nextPage:null,lastPage:0,total:0},d=await D(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Jv});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return y.length>0&&(y.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);u[`${k}Page`]=v}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(L(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){_n(e);try{return await D(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ot})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_n(e);try{return await D(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ot})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){_n(e);try{return await D(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ot})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_n(e.userId);try{const{data:n,error:r}=await D(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(L(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_n(e.userId),_n(e.id);try{return{data:await D(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}}const e0={getItem:t=>Pr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Pr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Pr()&&globalThis.localStorage.removeItem(t)}};function Ku(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function t0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xn={debug:!!(globalThis&&Pr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $h extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class n0 extends $h{}async function r0(t,e,n){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new n0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}t0();const s0={url:fv,storageKey:pv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gu(t,e,n){return await n()}class Gr{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gr.nextInstanceID,Gr.nextInstanceID+=1,this.instanceID>0&&Qe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},s0),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Zv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ih(s.fetch),this.lock=s.lock||Gu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=r0:this.lock=Gu,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Pr()?this.storage=e0:(this.memoryStorage={},this.storage=Ku(this.memoryStorage)):(this.memoryStorage={},this.storage=Ku(this.memoryStorage)),Qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Th}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Rv(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Qe()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),xv(i)){const a=(e=i.details)===null||e===void 0?void 0:e.code;if(a==="identity_already_exists"||a==="identity_not_found"||a==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return L(n)?{error:n}:{error:new Rh("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:dt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(L(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:m}=e;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await wn(this.storage,this.storageKey)),i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:_},xform:dt})}else if("phone"in e){const{phone:d,password:h,options:m}=e;i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:dt})}else throw new ks("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(L(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vu})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vu})}else throw new ks("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new xs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,l,a,u,d,h,m,y;let _,v;if("message"in e)_=e.message,v=e.signature;else{const{chain:k,wallet:f,statement:p,options:g}=e;let w;if(Qe())if(typeof f=="object")w=f;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))w=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=f}const j=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const E=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),p?{statement:p}:null));let C;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")C=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)C=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)_=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),v=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${j.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const E=await w.signMessage(new TextEncoder().encode(_),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=E}}try{const{data:k,error:f}=await D(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Nv(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:dt});if(f)throw f;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new xs}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:f})}catch(k){if(L(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const n=await js(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await D(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:dt});if(await Es(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(L(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:dt}),{data:a,error:u}=l;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new xs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:a}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await wn(this.storage,this.storageKey));const{error:h}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:d}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ks("You must provide either an email or phone number.")}catch(l){if(L(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await D(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:dt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,u=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(s){if(L(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await wn(this.storage,this.storageKey)),await D(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Gv})}catch(i){if(L(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new bt;const{error:s}=await D(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(L(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await D(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await D(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ks("You must provide either an email or phone number and a type")}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fo:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(a,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bt}:await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ot})})}catch(n){if(L(n))return _v(n)&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new bt;const o=s.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await wn(this.storage,this.storageKey));const{data:u,error:d}=await D(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Ot});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=mo(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(L(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new bt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Qe())throw new Ss("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ss(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Uu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ss("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Uu("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:u}=e;if(!i||!l||!o||!u)throw new Ss("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;a&&(m=parseInt(a));const y=m-d;y*1e3<=kn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const _=m-h;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,m,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,m,d);const{data:v,error:k}=await this._getUser(i);if(k)throw k;const f={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(L(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await js(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(wv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Pv(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await wn(this.storage,this.storageKey,!0));try{return await D(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(L(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,a,u,d;const{data:h,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await D(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Qe()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(L(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await D(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Av(async s=>(s>0&&await Iv(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await D(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&po(i)&&Date.now()+o-r<kn})}catch(r){if(this._debug(n,"error",r),L(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qe()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await js(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<fo;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${fo}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),po(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ii;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new bt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),L(i)){const o={session:null,error:i};return po(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ah(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Es(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${kn}ms, refresh threshold is ${gl} ticks`),s<=gl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $h)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await wn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await D(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:u}=await D(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=a==null?void 0:a.totp)===null||s===void 0)&&s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await D(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(L(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await D(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(L(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mo(s.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+vv>Date.now()))return r;const{data:s,error:i}=await D(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Tr("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Tr("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:_}=await this.getSession();if(_||!y.session)return{data:null,error:_};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:a}}=mo(r);if(Fv(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const u=Bv(s.alg),d=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Cv(`${l}.${a}`)))throw new Tr("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}}Gr.nextInstanceID=0;const i0=Gr;class o0 extends i0{constructor(e){super(e)}}var l0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class a0{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=dv(e),a=new URL(l);this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const u=`sb-${a.hostname.split(".")[0]}-auth-token`,d={db:rv,realtime:iv,auth:Object.assign(Object.assign({},sv),{storageKey:u}),global:nv},h=hv(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=uv(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Eg(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new tg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Zg(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return l0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:a},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o0({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:a,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Dg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const u0=(t,e,n)=>new a0(t,e,n),c0="https://ljgokkoavmyygeaszsim.supabase.co",d0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqZ29ra29hdm15eWdlYXN6c2ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxMDIxNjUsImV4cCI6MjA2NTY3ODE2NX0.jlDNZ8fubiHqLywhBkPTxh5eBY0IevcUfBIUNPxyFPo",ve=u0(c0,d0,{db:{schema:"public"},auth:{autoRefreshToken:!0,persistSession:!1},global:{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}});class h0{async triggerRecommendationGeneration(e){try{console.log("Triggering recommendation generation for session:",e),console.log("Environment check - API URL configured:",!0);const n=await Ou.generateRecommendations(e);return n?(console.log("Recommendations generated successfully:",n),!0):(console.warn("Failed to generate recommendations via API"),!1)}catch(n){return console.error("Error triggering recommendation generation:",n),!1}}async generateRecommendations(e,n){try{console.log("Reading recommendations from database for session:",e);const{data:r,error:s}=await ve.from("recommendations").select("movie_id").eq("session_id",e).not("display_order","is",null).order("display_order",{ascending:!0});if(s)return console.error("Error fetching recommendations from database:",s),this.getFallbackRecommendations();if(!r||r.length===0)return console.warn("No recommendations found in database for session:",e),this.getFallbackRecommendations();const i=r.map(o=>o.movie_id);return console.log("Recommendations loaded from database:",i),i}catch(r){return console.error("Error reading recommendations from database:",r),this.getFallbackRecommendations()}}async getFallbackRecommendations(){try{console.log("Using fallback: getting first 10 phase2_movies");const{data:e,error:n}=await ve.from("phase2_movies").select("id").limit(10);if(n)throw n;const r=(e==null?void 0:e.map(s=>s.id))||[];for(let s=r.length-1;s>0;s--){const i=Math.floor(Math.random()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return console.log("Using fallback recommendations:",r),r}catch(e){return console.error("Error getting fallback recommendations:",e),[]}}async checkHealth(){return await Ou.checkHealth()}async logRecommendation(e,n){try{console.log("Recommendations for session",e,":",n)}catch(r){console.error("Error logging recommendation:",r)}}}const bs=new h0,f0=(t,e=!0)=>{const n=U.useRef([]),r=U.useRef(Date.now()),s=U.useRef(null),i=async a=>{if(!(!t||t.startsWith("local_")||a.length===0))try{const u=a.map(h=>({session_id:t,x:Math.round(h.x),y:Math.round(h.y),timestamp:h.timestamp})),{error:d}=await ve.from("mouse_events").insert(u);d?console.error("Error saving mouse events:",d):console.log(`Saved ${u.length} mouse events`)}catch(u){console.error("Error saving mouse events:",u)}},o=a=>{if(!e||!t)return;const u={x:a.clientX,y:a.clientY,timestamp:new Date().toISOString()};n.current.push(u);const d=Date.now();if(n.current.length>=50||d-r.current>=5e3){const h=[...n.current];n.current=[],r.current=d,i(h)}},l=async()=>{if(n.current.length>0){const a=[...n.current];n.current=[],await i(a)}};return U.useEffect(()=>{if(!(!e||!t))return document.addEventListener("mousemove",o),s.current=setInterval(()=>{if(n.current.length>0){const a=[...n.current];n.current=[],r.current=Date.now(),i(a)}},1e4),()=>{document.removeEventListener("mousemove",o),s.current&&clearInterval(s.current),n.current.length>0&&l()}},[t,e]),{saveRemainingEvents:l}},wa="cinerate_session",vo=Date.now(),p0=t=>{try{localStorage.setItem(wa,JSON.stringify(t))}catch(e){console.error("Error saving session to localStorage:",e)}},m0=()=>{try{const t=localStorage.getItem(wa);if(t)return JSON.parse(t)}catch(t){console.error("Error loading session from localStorage:",t)}return null},g0=()=>{try{localStorage.removeItem(wa),localStorage.removeItem("supabase.auth.token"),sessionStorage.clear()}catch(t){console.error("Error clearing session from localStorage:",t)}};function v0(){const[t,e]=U.useState("intro"),[n,r]=U.useState([]),[s,i]=U.useState([]),[o,l]=U.useState(null),[a,u]=U.useState(Date.now()),[d,h]=U.useState(!1),[m,y]=U.useState(null),[_,v]=U.useState(5),[k,f]=U.useState(!1),[p,g]=U.useState(!1),[w,j]=U.useState([]),[E,C]=U.useState(new Map),[P,G]=U.useState(!1),[z,_e]=U.useState(new Map),[St,ut]=U.useState(null),[pn,Ai]=U.useState(!0),{saveRemainingEvents:nr}=f0(o,t!=="intro"&&t!=="complete");U.useEffect(()=>{(async()=>{const b=m0();b&&b.sessionId&&b.phase!=="intro"?(console.log("Restoring session from localStorage:",b),l(b.sessionId),e(b.phase),r(b.ratings),u(b.sessionStartTime),v(b.minimumRatingsRequired),ut(b.currentMoviesPhase),b.currentMoviesPhase&&await Ve(b.currentMoviesPhase,b.sessionId)):(console.log("No saved session found or session is at intro phase, starting fresh"),e("intro")),Ai(!1)})()},[]),U.useEffect(()=>{!pn&&o&&t!=="intro"&&p0({sessionId:o,phase:t,ratings:n,sessionStartTime:a,minimumRatingsRequired:_,currentMoviesPhase:St})},[o,t,n,a,_,St,pn]),U.useEffect(()=>{t==="initial"&&o&&N()},[t,o]),U.useEffect(()=>{const x=setTimeout(()=>{z.size>0&&(z.forEach(async(b,$)=>{await rt(b)}),_e(new Map))},500);return()=>clearTimeout(x)},[z,o]);const mn=async()=>{console.log("Starting app initialization"),G(!0);try{const x=await se();await Ve("initial",x),console.log("App initialization completed successfully")}catch(x){console.error("Error initializing app:",x),y(`Failed to initialize application: ${x.message||"Unknown error"}`)}finally{G(!1)}},N=async()=>{if(!(!o||o.startsWith("local_")))try{const x=window.screen.width,b=window.screen.height;await ve.from("user_sessions").update({screen_width:x,screen_height:b}).eq("id",o),console.log("Screen size recorded:",{screenWidth:x,screenHeight:b})}catch(x){console.error("Error recording screen size:",x)}},I=async(x,b)=>{if(!(!o||o.startsWith("local_")))try{console.log("Recording phase transition:",{fromPhase:x,toPhase:b,sessionId:o}),await ve.from("phase_transitions").insert({session_id:o,from_phase:x,to_phase:b,timestamp:new Date().toISOString()}),console.log("Phase transition recorded:",{fromPhase:x,toPhase:b})}catch($){console.error("Error recording phase transition:",$)}},M=x=>{const b=new Date().toISOString();C($=>new Map($).set(x,b))},Y=async x=>{const b=E.get(x);if(!b||!o||o.startsWith("local_"))return;const $=new Date().toISOString(),R=new Date($).getTime()-new Date(b).getTime();try{await ve.from("trailer_views").insert({session_id:o,movie_id:x,start_time:b,end_time:$,duration:Math.round(R/1e3)}),console.log("Trailer view recorded:",{movieId:x,duration:R/1e3})}catch(O){console.error("Error recording trailer view:",O)}C(O=>{const A=new Map(O);return A.delete(x),A})},se=async()=>{console.log("Creating new session");const x=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,b=new Date().toISOString(),$=[5,7,9,11,13,15],R=$[Math.floor(Math.random()*$.length)];v(R);let O;try{console.log("Inserting session into database");const{data:A,error:ne}=await ve.from("user_sessions").insert({user_id:x,phase:"initial",start_time:b,minimum_ratings_required:R}).select().single();ne&&(console.error("Database session creation failed:",ne),console.log("Continuing with local session due to database error")),A&&A.id?(O=A.id,l(O),console.log("Database session created:",A.id,"Minimum required:",R)):(O=`local_${Date.now()}`,l(O),console.log("Using local session:",O,"Minimum required:",R)),u(Date.now())}catch(A){console.error("Error creating session:",A),O=`local_${Date.now()}`,l(O),console.log("Using local session due to error:",O,"Minimum required:",R)}return O},Ve=async(x,b)=>{const $=b||o;console.log("=== FETCH MOVIES START ==="),console.log("Fetching movies of type:",x),console.log("Current phase:",t),console.log("Session ID:",$),h(!0),y(null);try{if(x==="initial"){console.log("Fetching initial movies from movies table...");const{data:R,error:O}=await ve.from("movies").select("*").order("id");if(console.log("Database query result:",{data:(R==null?void 0:R.length)||0,error:O}),O)throw console.error("Error fetching initial movies:",O),O;if(!R||R.length===0){console.warn("No initial movies found in database"),y("No movies found in database. Please check your database connection."),i([]);return}console.log("Initial movies fetched:",R.length);const ne=[...R].sort(()=>Math.random()-.5).map(pe=>({...pe,poster:`https://ljgokkoavmyygeaszsim.supabase.co/storage/v1/object/public/posters/${pe.id}.jpg?t=${vo}`}));console.log("Movies with updated posters:",ne.length),i(ne),ut("initial"),console.log("=== INITIAL MOVIES SET SUCCESSFULLY ===")}else if(console.log("=== FETCHING RECOMMENDED MOVIES ==="),$){console.log("Requesting recommendations for session:",$),console.log("Current ratings count:",n.length);const R=await bs.generateRecommendations($,n);if(console.log("Received recommended IDs:",R),R.length>0){console.log("Fetching movie details for recommended IDs...");const{data:O,error:A}=await ve.from("phase2_movies").select("*").in("id",R);if(A)throw console.error("Error fetching recommended movies:",A),A;if(O&&R.length>0){const ne=R.map(Ke=>O.find(Kh=>Kh.id===Ke)).filter(Boolean);console.log("Recommended movies sorted:",ne.length),console.log("Movie titles:",ne.map(Ke=>Ke.title)),await bs.logRecommendation($,R);const pe=ne.map(Ke=>({...Ke,poster:`https://ljgokkoavmyygeaszsim.supabase.co/storage/v1/object/public/posters/${Ke.id}.jpg?t=${vo}`}));console.log("✅ Final recommended movies set:",pe.length),i(pe)}else console.warn("No recommended movies data returned"),i([])}else{console.log("⚠️ No recommendations generated, using fallback");const{data:O,error:A}=await ve.from("phase2_movies").select("*").limit(10);if(A)throw console.error("Error fetching fallback movies:",A),A;if(O){const pe=[...O].sort(()=>Math.random()-.5).map(Ke=>({...Ke,poster:`https://ljgokkoavmyygeaszsim.supabase.co/storage/v1/object/public/posters/${Ke.id}.jpg?t=${vo}`}));console.log("✅ Fallback movies set:",pe.length),i(pe)}else console.warn("No fallback movies data returned"),i([])}ut("recommended")}else throw console.error("No session ID available for recommendations"),new Error("No session ID available for recommendations")}catch(R){console.error(`Error fetching ${x} movies:`,R),y(`Failed to load ${x} movies: ${R.message||"Unknown error"}`),i([])}finally{h(!1),console.log("=== FETCH MOVIES END ===")}},rt=async x=>{if(!o||o.startsWith("local_")){console.log("Skipping database save - no valid session ID");return}try{console.log("Saving rating to database:",{session_id:o,movie_id:x.movieId,rating:x.rating,diversity_rating:x.diversity,novelty_rating:x.novelty,serendipity_rating:x.serendipity});const{data:b,error:$}=await ve.from("movie_ratings").select("id").eq("session_id",o).eq("movie_id",x.movieId).limit(1);if($)throw $;const R={rating:x.rating>=0?x.rating:null,diversity_rating:x.diversity!==void 0&&x.diversity>=0?x.diversity:null,novelty_rating:x.novelty!==void 0&&x.novelty>=0?x.novelty:null,serendipity_rating:x.serendipity!==void 0&&x.serendipity>=0?x.serendipity:null};if(b&&b.length>0){const{error:O}=await ve.from("movie_ratings").update(R).eq("id",b[0].id);if(O)throw O;console.log("Rating updated successfully:",R)}else if(R.rating!==null||R.diversity_rating!==null||R.novelty_rating!==null||R.serendipity_rating!==null){const O={session_id:o,movie_id:x.movieId,...R,rating:R.rating!==null?R.rating:0},{error:A}=await ve.from("movie_ratings").insert(O);if(A)throw A;console.log("Rating inserted successfully:",O)}}catch(b){console.error("Error saving rating to database:",b),setTimeout(async()=>{try{await rt(x)}catch($){console.error("Retry failed for rating save:",$)}},1e3)}},rr=async x=>{if(!(!o||o.startsWith("local_")))try{await ve.from("user_sessions").update({phase:x}).eq("id",o),console.log("Session phase updated to:",x)}catch(b){console.error("Error updating session phase:",b)}},ct=async()=>{if(!(!o||o.startsWith("local_")))try{await ve.from("user_sessions").update({end_time:new Date().toISOString(),phase:"complete"}).eq("id",o),console.log("Session ended")}catch(x){console.error("Error ending session:",x)}},gn=U.useCallback(async(x,b)=>{r($=>{const R=$.findIndex(ne=>ne.movieId===x);let O;R>=0?(O=[...$],O[R]={...O[R],rating:b}):O=[...$,{movieId:x,rating:b}];const A=O.find(ne=>ne.movieId===x);if(A){const ne=`${x}_main`;_e(pe=>new Map(pe).set(ne,A))}return O})},[o]),$i=U.useCallback(async(x,b,$)=>{r(R=>{const O=R.findIndex(pe=>pe.movieId===x);let A;O>=0?(A=[...R],A[O]={...A[O],[b]:$}):A=[...R,{movieId:x,rating:-1,[b]:$}];const ne=A.find(pe=>pe.movieId===x);if(ne){const pe=`${x}_${b}`;_e(Ke=>new Map(Ke).set(pe,ne))}return A})},[o]),Li=x=>n.find(b=>b.movieId===x)||{movieId:x,rating:-1},sr=()=>n.filter(x=>x.rating>=0).length,Lh=()=>{if(t==="recommendation"){const x=s.map(b=>b.id);return n.filter(b=>b.rating>=0&&x.includes(b.movieId)).length}return sr()},Mh=()=>{if(t!=="recommendation")return[];const x=[];return s.forEach(b=>{const $=Li(b.id),R=$.rating>=0,O=$.diversity!==void 0&&$.diversity>=0,A=$.novelty!==void 0&&$.novelty>=0,ne=$.serendipity!==void 0&&$.serendipity>=0;(!R||!O||!A||!ne)&&x.push(b.id)}),x},zh=()=>sr()>=_,Dh=()=>s.every(x=>{const b=Li(x.id),$=b.rating>=0,R=b.diversity!==void 0&&b.diversity>=0,O=b.novelty!==void 0&&b.novelty>=0,A=b.serendipity!==void 0&&b.serendipity>=0;return $&&R&&O&&A}),Uh=()=>{console.log("Starting from intro, initializing app..."),e("initial"),!o&&!P&&(console.log("No session exists, initializing new session and loading movies"),mn())},Fh=async()=>{if(console.log("=== GETTING RECOMMENDATIONS ==="),console.log("Session ID:",o),console.log("API URL configured:",!0),console.log("Actual API URL:","https://recs-api-467031344420.us-central1.run.app"),console.log("Webhook secret configured:",!1),o&&!o.startsWith("local_")){console.log("Triggering recommendation generation...");const x=await bs.checkHealth();console.log("API health check:",x),x||console.warn("API health check failed - proceeding with fallback"),await bs.triggerRecommendationGeneration(o)?console.log("✅ Recommendation generation successful"):(console.warn("❌ Recommendation generation failed or API not available, proceeding with fallback"),console.log("Will use fallback recommendations from phase2_movies table"))}else console.log("Using local session or no session, skipping API call");console.log("Proceeding to recommendation phase..."),await I("choice","recommendation"),e("recommendation"),await rr("recommendation"),await Ve("recommended"),console.log("=== RECOMMENDATION PHASE STARTED ===")},Bh=async()=>{e("initial"),await Ve("initial")},_a=()=>{if(t==="recommendation"){const x=Mh();if(x.length>0){j(x);return}}I(t,"questionnaire"),e("questionnaire")},Hh=async x=>{if(await I("questionnaire","complete"),await nr(),o&&!o.startsWith("local_"))try{await ve.from("questionnaire_responses").insert({session_id:o,movie_watching_frequency:x.movieWatchingFrequency,movie_genre_preferences:x.movieGenrePreferences,movie_expertise:x.movieExpertise,serendipity_attitude:x.serendipityAttitude,novelty_attitude:x.noveltyAttitude,diversity_attitude:x.diversityAttitude,novelty_attitude2:x.noveltyAttitude2,diversity_attitude2:x.diversityAttitude2,serendipity_attitude2:x.serendipityAttitude2,attention_check:x.attentionCheck,gender:x.gender,age_range:x.ageRange,additional_comments:x.additionalComments,email:x.email}),console.log("Questionnaire data saved")}catch(b){console.error("Error saving questionnaire data:",b)}e("complete"),await ct(),g0()},Wh=()=>{const x=n.filter(b=>b.rating>=0);return x.length===0?0:x.reduce((b,$)=>b+$.rating,0)/x.length};U.useEffect(()=>{t==="recommendation"&&s.length>0&&Dh()&&!k&&!p&&f(!0)},[n,t,s,k,p]);const qh=()=>{f(!1),g(!0)},Vh=()=>{f(!1),_a()};return pn?c.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ru,{className:"animate-spin text-amber-500 mx-auto mb-4",size:48}),c.jsx("p",{className:"text-gray-400 text-lg",children:"Restoring your session..."})]})}):t==="intro"?c.jsx(qm,{onStart:Uh}):t==="choice"?c.jsx(Hm,{ratingsCount:sr(),onGetRecommendations:Fh,onRateMore:Bh}):t==="questionnaire"?c.jsx(Km,{onComplete:Hh}):t==="complete"?c.jsx(Wm,{totalRatings:sr(),averageRating:Wh()}):c.jsxs("div",{className:"min-h-screen bg-gray-950",children:[c.jsx("header",{className:"bg-gray-900 border-b border-gray-800 sticky top-0 z-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(ch,{className:"text-amber-500",size:32}),c.jsx("h1",{className:"text-2xl font-bold text-white",children:"CineRate"})]}),c.jsx("div",{className:"text-amber-400 font-medium",children:t==="initial"?"Rate Movies":"Rate Recommendations"})]})})}),c.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:d?c.jsx("div",{className:"flex items-center justify-center min-h-96",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ru,{className:"animate-spin text-amber-500 mx-auto mb-4",size:48}),c.jsx("p",{className:"text-gray-400 text-lg",children:"Loading movies..."})]})}):m?c.jsx("div",{className:"flex items-center justify-center min-h-96",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Pu,{className:"text-red-500 mx-auto mb-4",size:48}),c.jsx("p",{className:"text-red-400 text-lg mb-4",children:m}),c.jsx("button",{onClick:()=>Ve(t==="recommendation"?"recommended":"initial"),className:"bg-amber-500 hover:bg-amber-600 text-black font-semibold py-2 px-4 rounded-lg transition-colors",children:"Retry"})]})}):s.length===0?!P&&!d&&c.jsx("div",{className:"flex items-center justify-center min-h-96",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Pu,{className:"text-yellow-500 mx-auto mb-4",size:48}),c.jsx("p",{className:"text-gray-400 text-lg mb-4",children:"No movies available"}),c.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Phase: ",t,", Session ID: ",o||"None",", Loading: ",d?"Yes":"No"]}),c.jsx("button",{onClick:()=>{console.log("Retry button clicked, current state:",{phase:t,sessionId:o,loadingMovies:d}),t==="initial"&&!o?(console.log("No session, initializing app..."),mn()):Ve(t==="recommendation"?"recommended":"initial")},className:"bg-amber-500 hover:bg-amber-600 text-black font-semibold py-2 px-4 rounded-lg transition-colors",children:"Retry Loading Movies"})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-8",children:[c.jsx(Bm,{current:Lh(),total:s.length,minimum:t==="initial"?_:void 0,label:t==="initial"?"Initial Movie Ratings Progress":"Recommendation Ratings Progress"}),t==="initial"&&zh()&&c.jsx("div",{className:"text-center mb-6",children:c.jsx("button",{onClick:()=>{I("initial","choice"),e("choice")},className:"bg-amber-500 hover:bg-amber-600 text-black font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg",children:"Continue to Next Step"})}),t==="recommendation"&&c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("button",{onClick:_a,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg",children:"Finish Study"}),w.length>0&&c.jsxs("div",{className:"mt-4 p-4 bg-red-900 border border-red-500 rounded-lg",children:[c.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Please complete all ratings before finishing the study."}),c.jsxs("p",{className:"text-red-300 text-sm",children:["Missing ratings for ",w.length," movie(s). Movies with incomplete ratings are highlighted with red borders below."]})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(x=>{const b=Li(x.id),$=w.includes(x.id);return c.jsx("div",{className:`${$?"ring-2 ring-red-500 rounded-xl":""}`,children:c.jsx(Fm,{movie:x,rating:b.rating,onRatingChange:R=>{gn(x.id,R),j(O=>O.filter(A=>A!==x.id))},showAdditionalQuestions:t==="recommendation",diversityRating:b.diversity||-1,noveltyRating:b.novelty||-1,serendipityRating:b.serendipity||-1,onDiversityChange:R=>{$i(x.id,"diversity",R),j(O=>O.filter(A=>A!==x.id))},onNoveltyChange:R=>{$i(x.id,"novelty",R),j(O=>O.filter(A=>A!==x.id))},onSerendipityChange:R=>{$i(x.id,"serendipity",R),j(O=>O.filter(A=>A!==x.id))},onTrailerStart:M,onTrailerEnd:Y})},x.id)})}),t==="initial"&&c.jsxs("div",{className:"text-center mt-12",children:[c.jsxs("p",{className:"text-gray-400 text-lg mb-4",children:["Rate at least ",_," movies to get personalized recommendations"]}),c.jsxs("p",{className:"text-amber-400 text-sm",children:[sr(),"/",_," minimum ratings completed"]})]})]})}),c.jsx(Vm,{isOpen:k,onModifyRatings:qh,onFinish:Vh})]})}lh(document.getElementById("root")).render(c.jsx(U.StrictMode,{children:c.jsx(v0,{})}));
